(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-appointmentModule-pages-creatorMeetingOperation-meetingOperation"],{"06c5":function(e,t,i){"use strict";i("a630"),i("fb6a"),i("d3b7"),i("25f0"),i("3ca3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(i("6b75"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(e){if("string"===typeof e)return(0,a.default)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?(0,a.default)(e,t):void 0}}},"0720":function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return a}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticClass:"page__bd"},[i("v-uni-view",{staticClass:"weui-cells weui-cells_after-title"},[i("v-uni-view",{staticClass:"weui-cell weui-cell_input",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectMeetingRoomAndTime.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"weui-cell__hd"},[i("v-uni-image",{staticClass:"image-items",attrs:{src:e.imageObj.requiredPic}})],1),i("v-uni-view",{staticClass:"weui-cell__bd"},[e._v("房间号")]),i("v-uni-view",{staticClass:"weui-cell__ft"},[i("v-uni-view",{staticClass:"weui-input"},[e._v(e._s(e.pageObj.meetingRoomNumber))])],1),i("v-uni-view",{staticClass:"weui-cell__ft weui-cell__ft_in-access"})],1)],1),i("v-uni-view",{staticClass:"weui-cells weui-cells_after-title",staticStyle:{"margin-top":"6px"}},[i("v-uni-view",{staticClass:"weui-cell weui-cell_input"},[i("v-uni-view",{staticClass:"weui-cell__hd"},[i("v-uni-image",{staticClass:"image-items",attrs:{src:e.imageObj.requiredPic}})],1),i("v-uni-view",{staticClass:"weui-cell__bd"},[e._v("会议主题")]),i("v-uni-view",{staticClass:"weui-cell__ft"},[i("v-uni-input",{staticClass:"weui-input",attrs:{placeholder:"输入会议主题",value:e.inpVal},on:{blur:function(t){arguments[0]=t=e.$handleEvent(t),e.meetingNameInp.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"weui-cell weui-cell_select"},[i("v-uni-view",{staticClass:"weui-cell__hd",staticStyle:{"margin-left":"15px"}},[i("v-uni-image",{staticClass:"image-items",attrs:{src:e.imageObj.requiredPic}})],1),i("v-uni-view",{staticClass:"weui-cell__bd "},[e._v("会议类型")]),i("v-uni-view",{staticClass:"weui-cell__ft"},[i("v-uni-picker",{attrs:{value:e.countryIndex,range:e.countries},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindCountryChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"weui-select weui-select_in-select-after"},[e._v(e._s(e.countries[e.countryIndex]))])],1)],1)],1),i("v-uni-view",{staticClass:"weui-cell weui-cell_input"},[i("v-uni-view",{staticClass:"weui-cell__hd"},[i("v-uni-image",{staticClass:"image-items",attrs:{src:e.imageObj.requiredPic}})],1),i("v-uni-view",{staticClass:"weui-cell__bd"},[e._v("开始时间")]),i("v-uni-view",{staticClass:"weui-input",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectMeetingRoomAndTime.apply(void 0,arguments)}}},[e._v(e._s(e.pageObj.startMeetingTime))]),i("v-uni-view",{staticClass:"weui-cell__ft weui-cell__ft_in-access"})],1),i("v-uni-view",{staticClass:"weui-cell"},[i("v-uni-view",{staticClass:"weui-cell__hd"},[i("v-uni-image",{staticClass:"image-items",attrs:{src:e.imageObj.requiredPic}})],1),i("v-uni-view",{staticClass:"weui-cell__bd"},[e._v("发起人")]),i("v-uni-view",{staticClass:"weui-cell__ft"},[e._v(e._s(e.founder))])],1),i("v-uni-view",{staticClass:"weui-cell",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.tapAttendee.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"weui-cell__hd"},[i("v-uni-image",{staticClass:"image-items",attrs:{src:e.imageObj.requiredPic}})],1),i("v-uni-view",{staticClass:"weui-cell__bd"},[e._v("参会人员")]),i("v-uni-view",{staticClass:"weui-cell__ft attendee"},[e._v(e._s(e.attendMeeting))]),i("v-uni-view",{staticClass:"weui-cell__ft weui-cell__ft_in-access"})],1),i("v-uni-view",{staticClass:"weui-cell"},[i("v-uni-view",{staticClass:"weui-cell__bd"},[i("v-uni-view",{staticStyle:{"margin-bottom":"10px",dispaly:"flex"}},[i("v-uni-image",{staticClass:"image-items",attrs:{src:e.imageObj.requiredPic}}),e._v("会议内容")],1),i("v-uni-textarea",{staticClass:"weui-textarea",staticStyle:{height:"3.3em"},attrs:{placeholder:"请输入...",value:e.textAreaVal,maxlength:e.maxlength},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.meetingConting.apply(void 0,arguments)}}}),i("v-uni-view",{class:"weui-textarea-counter "+(e.wordsWith?"red":"")},[e._v(e._s(e.contentLength)+"/200")])],1)],1)],1),i("v-uni-view",{staticClass:"weui-cells weui-cells_after-title",staticStyle:{"margin-top":"6px"}},[i("v-uni-view",{staticClass:"weui-cell "},[i("v-uni-view",{staticClass:"weui-cell__hd"},[i("v-uni-image",{staticClass:"image-items",attrs:{src:e.imageObj.requiredPic}})],1),i("v-uni-view",{staticClass:"weui-cell__bd"},[e._v("会前考勤时间")]),i("v-uni-view",{staticClass:"weui-cell__ft checkBox"},[i("v-uni-input",{staticClass:"checkInp",attrs:{type:"number",value:e.meetingBeforeTime},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.meetingBeforeTimeInp.apply(void 0,arguments)}}}),i("v-uni-text",[e._v("分钟")])],1)],1),i("v-uni-view",{staticClass:"weui-cell "},[i("v-uni-view",{staticClass:"weui-cell__hd"},[i("v-uni-image",{staticClass:"image-items",attrs:{src:e.imageObj.requiredPic}})],1),i("v-uni-view",{staticClass:"weui-cell__bd"},[e._v("会中考勤时间")]),i("v-uni-view",{staticClass:"weui-cell__ft checkBox"},[i("v-uni-input",{staticClass:"checkInp",attrs:{type:"number",value:e.meetingAfterTime},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.meetingAfterTimeInp.apply(void 0,arguments)}}}),i("v-uni-text",[e._v("分钟")])],1)],1),i("v-uni-view",{staticClass:"weui-cell",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.tapHoster.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"weui-cell__hd"},[i("v-uni-image",{staticClass:"image-items",attrs:{src:e.imageObj.requiredPic}})],1),i("v-uni-view",{staticClass:"weui-cell__bd"},[e._v("主持人")]),i("v-uni-view",{staticClass:"weui-cell__ft attendee"},[e._v(e._s(e.hoster))]),i("v-uni-view",{staticClass:"weui-cell__ft weui-cell__ft_in-access"})],1),i("v-uni-view",{staticClass:"weui-cell",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.tapRecoder.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"weui-cell__hd"},[i("v-uni-image",{staticClass:"image-items",attrs:{src:e.imageObj.requiredPic}})],1),i("v-uni-view",{staticClass:"weui-cell__bd"},[e._v("记录人")]),i("v-uni-view",{staticClass:"weui-cell__ft attendee"},[e._v(e._s(e.recoder))]),i("v-uni-view",{staticClass:"weui-cell__ft weui-cell__ft_in-access"})],1)],1),i("v-uni-view",{staticClass:"page__bd page__bd_spacing button_top"},[i("v-uni-button",{staticClass:"weui-btn",attrs:{type:"primary",disabled:e.disabled},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.editSubmit.apply(void 0,arguments)}}},[e._v("提 交")])],1),i("v-uni-view",{staticClass:"weui-cell appiontNotive"},[i("v-uni-view",[e._v("温馨提示")]),i("v-uni-view",[e._v("1. 默认提前"+e._s(e.timeObj.msgAdvanceTime)+"分钟给每位考勤人员发送考勤通知。")]),i("v-uni-view",[e._v("2. 会议召开最短时间不超过30分钟。")]),i("v-uni-view",[e._v("3. 会议预约开始时间后不可取消预约。")]),i("v-uni-view",[e._v("4. 会议开始前考勤时间不能超过会议开始时间30分钟。")]),i("v-uni-view",[e._v("5. 会议考勤签到区间是会议开始的“前"+e._s(e.meetingBeforeTime)+"分钟”和“后"+e._s(e.meetingAfterTime)+"分钟”,总共"+e._s(e.meetingCheckSumTime)+" 分钟,时间来自创建会议时填写的考勤时间")])],1)],1)],1)},o=[]},"1e90":function(e,t,i){var a=i("d6f3");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("44d60308",a,!0,{sourceMap:!1,shadowMode:!1})},2909:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=c(i("6005")),n=c(i("db90")),o=c(i("06c5")),l=c(i("3427"));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return(0,a.default)(e)||(0,n.default)(e)||(0,o.default)(e)||(0,l.default)()}},3350:function(e,t){var i="/static/pages/appointmentModule/resources/pic",a={image:i,optionAppointmentPic:"".concat(i,"/option_appointment.png"),optionAttendanceApprovePic:"".concat(i,"/option_attendance_approve.png"),optionMakeCardApplyPic:"".concat(i,"/option_make_card_apply.png"),meetingAttendanceListPic:"".concat(i,"/meeting_attendance_list.png"),meetingAttendanceSignInPic:"".concat(i,"/meeting_attendance_sign_in.png"),blueRecord:"".concat(i,"/blueRecord.png"),closeDefault:"".concat(i,"/closeDefault.png"),closeOpen:"".concat(i,"/closeOpen.png"),loadingPic:"".concat(i,"/loading.png"),checkPendingPic:"".concat(i,"/check_pending.png"),approvePic:"".concat(i,"/approve.png"),unapprovePic:"".concat(i,"/unapprove.png"),nostartPic:"".concat(i,"/nostart.png"),readyStartPic:"".concat(i,"/action.png"),submitCluePic:"".concat(i,"/submit_clue.png"),meetingRoomSmallPic:"".concat(i,"/meeting_room_small.png"),meetingRoomMiddlePic:"".concat(i,"/meeting_room_middle.png"),meetingRoomBigPic:"".concat(i,"/meeting_room_big.png"),meetingRoomFrobidPic:"".concat(i,"/meeting_room_frobid.png"),requiredPic:"".concat(i,"/required.png"),attendaceRightPic:"".concat(i,"/right.png"),attendaceErrorPic:"".concat(i,"/error.png"),readyStartingPic:"".concat(i,"/stating.png"),uploadImgPic:"".concat(i,"/Group.png"),blueSignPic:"".concat(i,"/blueSign.png"),changGuanAppiontPic:"".concat(i,"/PIM.png"),meetingRecordPic:"".concat(i,"/meetingRecord.png"),meetingRoomPic:"".concat(i,"/meetingRoom.png"),pianoRoomPic:"".concat(i,"/pianoRoom.png"),dancingPic:"".concat(i,"/dancing.png"),dancingListPic:"".concat(i,"/dancingList.png"),meetingOutPic:"".concat(i,"/meetinOut.png")};e.exports=a},3427:function(e,t,i){"use strict";function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},5021:function(e,t,i){"use strict";var a=i("1e90"),n=i.n(a);n.a},6005:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(i("6b75"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e))return(0,a.default)(e)}},"6b75":function(e,t,i){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},"92d4":function(e,t,i){"use strict";i.r(t);var a=i("0720"),n=i("c774");for(var o in n)"default"!==o&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("5021");var l,c=i("f0c5"),s=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"9abbdccc",null,!1,a["a"],l);t["default"]=s.exports},c774:function(e,t,i){"use strict";i.r(t);var a=i("ee5a"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},d6f3:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,"uni-page-body[data-v-9abbdccc]{font-size:%?24?%}.page__bd_spacing[data-v-9abbdccc]{margin-top:30px;padding-left:15px;padding-right:15px}.image-items[data-v-9abbdccc]{width:15px;height:20px;vertical-align:middle}.red[data-v-9abbdccc]{  /* 输入内容超字数 */color:red}.attendee[data-v-9abbdccc]{width:60%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.appiontNotive[data-v-9abbdccc]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;margin-top:%?20?%}.appiontNotive[data-v-9abbdccc]::before{border:none}.checkBox[data-v-9abbdccc]{display:-webkit-box;display:-webkit-flex;display:flex}.checkInp[data-v-9abbdccc]{margin-right:%?20?%;border-bottom:%?1?% solid #ddd;width:%?100?%;padding-right:%?10?%;box-sizing:border-box}",""]),e.exports=t},db90:function(e,t,i){"use strict";function a(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},ee5a:function(e,t,i){"use strict";var a=i("4ea4");i("99af"),i("c975"),i("a434"),i("b64b"),i("e25e"),i("ac1f"),i("5319"),i("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("2909")),o=getApp(),l=i("3350"),c={data:function(){return{pageObj:{},timeObj:{},imageObj:l,disabled:!1,countries:["内部会议","开放式会议"],countryIndex:0,contentLength:0,maxlength:200,wordsWith:!1,userId:0,founder:"",meetingName:"",meetingCont:"",inpVal:"",attendMeeting:"请添加",hoster:"请添加",recoder:"请添加",meetingRoomNumber:"请选择会议室",meetingRoomId:"",startMeetingTime:"",endTime:"",appiontTimeDate:"",checkTime:"",type:1,meetingId:"",meetingInitiatorId:"",meetingRecorderId:"",meetingEmceeId:"",isAgainApply:0,meetingBeforeTime:0,meetingAfterTime:0,meetingCheckSumTime:20,textAreaVal:"",meetingAttendee:""}},components:{},props:{},onLoad:function(e){this.getAppointmentConfigure(),console.log("------------------------会议考勤 - 会议编辑------------------------");this.meetingRoomNumber,this.meetingRoomId,this.startMeetingTime,this.endTime;"{}"!=JSON.stringify(e)&&(console.log(e),null!=e.meetingId?(console.log(e.meetingId),wx.setNavigationBarTitle({title:"公共资源_会议记录_会议编辑"}),o.globalData.StorageUtil.set("meetingId",e.meetingId),this.getEditMeetingData(e.meetingId),null!=e.isAgainApply&&this.setData({isAgainApply:e.isAgainApply}),this.setData({meetingId:e.meetingId})):wx.setNavigationBarTitle({title:"会议申请"}))},onShow:function(){if(console.log(this.pageObj),uni.$on("updMeetPageObj",this.updMeetPageObj),this.pageObj.checkT){var e=this.checkFn(this.pageObj.checkT);console.log(e),this.pageObj.checkTime=e,this.setData({pageObj:this.pageObj})}else{var t={meetingRoomNumber:"请选择房间号",startMeetingTime:"请选择时间"};this.setData({pageObj:t})}var i=o.globalData.StorageUtil.get("userInfoCach"),a=i.userId,n=i.name,l=this.hoster,c=this.recoder,s=this.meetingId,r=o.globalData.StorageUtil.get("attendeeStudentCach"),g=o.globalData.StorageUtil.get("hosterCach"),d=o.globalData.StorageUtil.get("recoderCach"),m=this.attendReduce(r,g,d);o.globalData.StorageUtil.set("attendeeStudentCach",m),m.length>0?this.concatArr(m):this.setData({attendMeeting:"请添加"}),g.length>0?(l=g[0].name,l&&this.setData({hoster:l})):l="请添加",d.length>0?(c=d[0].name,c&&this.setData({recoder:c})):c="请添加",this.setData({founder:n,userId:a,meetingId:s,hoster:l,recoder:c})},onUnload:function(){wx.hideLoading(),this.clearStorageData(),uni.$off("updMeetPageObj",this.updMeetPageObj)},methods:{updMeetPageObj:function(e){this.setData({pageObj:e.pageObj})},getAppointmentConfigure:function(e){var t=this;o.globalData.ShowMsgUtil.netErrNotice();var i=o.globalData.StorageUtil.get("userInfoCach");wx.request({url:o.globalData.RequestUrl.appointmentRequestUrl.getAppointmentConfigure+"?areaType=1",method:"GET",header:{token:i.token},success:function(e){if(console.log('获取预约，所需的配置信息"',e.data),e.data&&200==e.data.code){var i=e.data.rows;t.contralTime(i.configureDtos)}else o.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code)},fail:function(){o.globalData.ShowMsgUtil.showNoneToastByFail()}})},contralTime:function(e){if(e){var t={};t.appointmentAdvanceTime=null==e.appointmentAdvanceTime?0:e.appointmentAdvanceTime,t.cancelAdvanceTime=null==e.cancelAdvanceTime?0:e.cancelAdvanceTime,t.msgAdvanceTime=null==e.msgAdvanceTime?0:e.msgAdvanceTime;var i=null==e.meetingStartCheckInTime?0:e.meetingStartCheckInTime,a=null==e.meetingEndCheckInTime?0:e.meetingEndCheckInTime;this.setData({timeObj:t,meetingBeforeTime:i,meetingAfterTime:a})}},checkFn:function(e){if("ios"==o.globalData.SystemInfo.platform)var t=e.replace(/-/g,"/");var i=new Date(t),a=i.getTime(i),n=a-6e4*this.timeObj.msgAdvanceTime,l=a+6e4*this.timeObj.msgAdvanceTime,c=o.globalData.PublicUtil.formatTimeTwo(n,"Y-M-D h:m")+" - "+o.globalData.PublicUtil.formatTimeTwo(l,"h:m");return c},meetingBeforeTimeInp:function(e){var t=""==e.detail.value?0:e.detail.value,i=parseInt(t),a=i+parseInt(this.meetingAfterTime);i<=30&&i>=0?this.setData({meetingBeforeTime:i,meetingCheckSumTime:a}):0==e.detail.value.length||(o.globalData.ShowMsgUtil.showNoneToast("会前考勤时间不能大于30分钟",2e3),this.setData({meetingBeforeTime:30}))},meetingAfterTimeInp:function(e){var t=""==e.detail.value?0:e.detail.value,i=parseInt(t),a=parseInt(this.meetingBeforeTime)+parseInt(i);i<=30&&i>=0?this.setData({meetingAfterTime:i,meetingCheckSumTime:a}):0==e.detail.value.length||(o.globalData.ShowMsgUtil.showNoneToast("会中考勤时间不能大于30分钟",2e3),this.setData({meetingAfterTime:10,meetingCheckSumTime:a}))},tapAttendee:function(){var e="attendee";o.globalData.ShowMsgUtil.showLoadToast("正在跳转...",500),o.globalData.PublicUtil.navigateByUrl(o.globalData.PageUrl.appointmentPageUrl.selectDepartmentUrl+"?limitSelectPerson="+e,500)},tapHoster:function(){var e="hoster";o.globalData.ShowMsgUtil.showLoadToast("正在跳转...",500),o.globalData.PublicUtil.navigateByUrl(o.globalData.PageUrl.appointmentPageUrl.selectDepartmentUrl+"?limitSelectPerson="+e,500)},tapRecoder:function(){var e="recoder";o.globalData.ShowMsgUtil.showLoadToast("正在跳转...",500),o.globalData.PublicUtil.navigateByUrl(o.globalData.PageUrl.appointmentPageUrl.selectDepartmentUrl+"?limitSelectPerson="+e,500)},concatArr:function(e){if(e.length>0&&e[0].name){for(var t="",i=0;i<e.length;i++)i==e.length-1?t+=e[i].name:t=t+e[i].name+"、";this.setData({attendMeeting:t})}},dealPageObj:function(e){var t={};t.meetingId=e.meetingId,t.meetingSubject=e.meetingSubject,t.meetingRoomName=e.meetingRoomName,t.meetingType=e.meetingType,t.meetingStartTime=e.meetingStartTime,t.meetingInitiator=e.meetingInitiator,t.meetingEmcee=e.meetingEmcee,t.meetingRecorder=e.meetingRecorder,t.meetingContent=e.meetingContent,t.createTime=e.createTime;e.meetingStatus;t.meetingAttendee="";for(var i=0;i<e.meetingAttendee.length;i++)i==e.meetingAttendee.length-1?t.meetingAttendee=t.meetingAttendee+e.meetingAttendee[i].userName:t.meetingAttendee=t.meetingAttendee+e.meetingAttendee[i].userName+"、";this.setData({pageObj:t})},selectMeetingRoomAndTime:function(){o.globalData.PublicUtil.navigateByUrl(o.globalData.PageUrl.appointmentPageUrl.appointmentTimeUrl+"?roomType=1",500)},bindCountryChange:function(e){console.log(e);var t=e.detail.value;this.setData({countryIndex:t})},meetingNameInp:function(e){var t=e.detail.value;this.setData({meetingName:t})},meetingConting:function(e){var t=e.detail.value,i=t.length;i>=200?(i=200,this.setData({contentLength:i,wordsWith:!0,meetingCont:t})):this.setData({contentLength:i,wordsWith:!1,meetingCont:t})},showStorageData:function(e,t){for(var i=[],a=0;a<e.length;a++){var n={};n.name=e[a].selectName,n.id=e[a].selectId,n.checked=!0,n.selectRole=e[a].selectRole,n.selectType=e[a].selectType,n.isHasChild=e[a].isHasChild,i[a]=n}return i},getEditMeetingData:function(e){o.globalData.ShowMsgUtil.showLoadToast("正在加载..."),o.globalData.ShowMsgUtil.netErrNotice();var t=this,i=o.globalData.StorageUtil.get("userInfoCach");wx.request({url:o.globalData.RequestUrl.appointmentRequestUrl.meetingDetail+"?meetingId="+e,method:"GET",header:{token:i.token},success:function(e){if(console.log("获取会议详情返回",e.data),e.data&&200==e.data.code){t.dealSelectShow(e.data.rows);var i=e.data.rows,a=i.meetingRoomId,n=(i.meetingRoomName,i.meetingInitiatorId),l=i.meetingInitiator,c=i.meetingEmceeId,s=i.meetingEmcee,r=i.meetingRecorderId,g=i.meetingRecorder,d=i.meetingStartTime,m=i.meetingEndTime,u=i.meetingType,v=i.meetingContent,p=i.meetingAttendee,h=i.meetingAttendeeR,f=i.meetingEmceeR,b=i.meetingRecorderR,w=i.meetingSubject,_=i.meetingRoomAddress,T=i.meetingRoomType,C=i.attenceBeforeTimeNumber,S=i.attenceAfterTimeNumber,D=t.showStorageData(h,""),I=t.showStorageData(f,s),y=t.showStorageData(b,g);o.globalData.StorageUtil.set("attendeeStudentCach",D),o.globalData.StorageUtil.set("hosterCach",I),o.globalData.StorageUtil.set("recoderCach",y),t.concatArr(D);var A=d,U=o.globalData.SystemInfo.platform;if("ios"==U)m=m.replace(/-/g,"/"),d=d.replace(/-/g,"/"),A=d;var R=t.checkFn(A);console.log(R);var P="";T.indexOf("大型")?P="大":T.indexOf("中型")?P="中":T.indexOf("小型")&&(P="小");var M={meetingRoomNumber:_.split("->")[0]+"--\x3e"+_.split("->")[_.split("->").length-1]+"("+P+")",checkTime:R,startMeetingTime:d+"-"+m.split(" ")[1],endMeetingTime:m,checkT:d,meetingRoomId:a};t.setData({meetingRoomId:a,meetingCont:v,textAreaVal:v,inpVal:w,meetingName:w,countryIndex:u-1,endTime:m,meetingAttendee:p,founder:l,meetingInitiatorId:n,recoder:y[0].name,meetingRecorderId:r,hoster:I[0].name,meetingEmceeId:c,pageObj:M,meetingBeforeTime:C,meetingAfterTime:S})}else o.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code)},fail:function(){o.globalData.ShowMsgUtil.showNoneToastByFail()},complete:function(){wx.hideToast()}})},dealSelectShow:function(e){var t=e.meetingAttendeeR,i=e.meetingEmceeR,a=(e.meetingInitiatorR,e.meetingRecorderR);o.globalData.StorageUtil.set("recoderCach",this.handlerUpdate(a)),o.globalData.StorageUtil.set("hosterCach",this.handlerUpdate(i));for(var n=0,l=0,c=[],s=[],r=0;r<t.length;r++)0==t[r].selectRole?(c[n]=t[r],n++):1==t[r].selectRole&&(s[l]=t[r],l++);o.globalData.StorageUtil.set("attendeeCach",this.handlerUpdate(s)),o.globalData.StorageUtil.set("attendeeStudentCach",this.handlerUpdate(c))},handlerUpdate:function(e){for(var t=0;t<e.length;t++)e[t].isUpdate=1;return e},attendeeArrRule:function(e,t){var i=[];if("edit"==t)for(var a=0;a<e.length;a++){var n={};n.selectId=e[a].id,n.selectRole=e[a].selectRole,n.selectType=e[a].selectType,i[a]=n}if("creat"==t)for(var o=0;o<e.length;o++){var l={};l.selectId=e[o].id,l.selectRole=e[o].selectRole,l.selectType=e[o].selectType,i[o]=l}return console.log(i),i},editSubmit:function(){this.meetingRoomId;var e=this.userId,t=this.countryIndex,i=(this.founder,this.startMeetingTime,this.endTime,this.meetingName),a=this.meetingCont,n=(this.disabled,this.meetingEmceeId,this.meetingRecorderId,this.meetingAttendee,this.meetingInitiatorId),l=this.pageObj,c={},s=o.globalData.StorageUtil.get("attendeeStudentCach"),r=o.globalData.StorageUtil.get("hosterCach"),g=o.globalData.StorageUtil.get("recoderCach"),d=o.globalData.StorageUtil.get("meetingId");if(console.log(r,g,s),i.length<=0||a.length<=0||s.length<=0||r.length<=0||g.length<=0)return o.globalData.ShowMsgUtil.showNoneToast("请填写完整信息",3e3),void this.setData({disabled:!1});if(this.setData({disabled:!0}),""!=d){console.log(l),"ios"==o.globalData.SystemInfo.platform&&(l.checkT=l.checkT.replace(/-/g,"/"),l.endMeetingTime=l.endMeetingTime.replace(/-/g,"/"));var m=new Date(l.checkT+":00").getTime(),u=new Date(l.endMeetingTime+":00").getTime();console.log("创建会议的时间检测"),console.log(m),console.log(u);var v=r[0].id,p=g[0].id;0==n&&(n=e);var h=this.attendReduce(s,r,g),f=this.attendeeArrRule(h,"edit"),b=f,w={meetingId:d,meetingRoomId:l.meetingRoomId,meetingSubject:i,meetingContent:a,meetingType:parseInt(t)+1,meetingInitiatorId:n,meetingEmceeId:v,meetingRecorderId:p,meetingAttendee:b,meetingStartTime:m,meetingEndTime:u,isAgainApply:this.isAgainApply,attenceStartTime:this.meetingBeforeTime,attenceEndTime:this.meetingAfterTime};console.log("data1-",w);var _=o.globalData.RequestUrl.appointmentRequestUrl.updateMeeting;this.creactAndUploadMeeting(w,_,"PUT","修改")}else{"ios"==o.globalData.SystemInfo.platform&&(l.checkT=l.checkT.replace(/-/g,"/"),l.endMeetingTime=l.endMeetingTime.replace(/-/g,"/"));var T=new Date(l.checkT+":00").getTime(),C=new Date(l.endMeetingTime+":00").getTime();console.log(T),console.log(C);var S=parseInt(t)+1;c.meetingRoomId=l.meetingRoomId,c.meetingSubject=i,c.meetingContent=a,c.meetingType=S,c.meetingStartTime=T,c.meetingEndTime=C,c.meetingInitiatorId=e,c.meetingEmceeId=r[0].id,c.meetingRecorderId=g[0].id;var D=this.attendReduce(s,r,g);c.meetingAttendee=this.attendeeArrRule(D,"creat");var I={meetingRoomId:c.meetingRoomId,meetingSubject:c.meetingSubject,meetingContent:c.meetingContent,meetingType:c.meetingType,meetingInitiatorId:c.meetingInitiatorId,meetingEmceeId:c.meetingEmceeId,meetingRecorderId:c.meetingRecorderId,meetingAttendee:c.meetingAttendee,meetingStartTime:c.meetingStartTime,meetingEndTime:c.meetingEndTime,isAgainApply:this.isAgainApply,attenceStartTime:this.meetingBeforeTime,attenceEndTime:this.meetingAfterTime};console.log("data",I);var y=o.globalData.RequestUrl.appointmentRequestUrl.creatMeeting;this.creactAndUploadMeeting(I,y,"POST","创建")}},attendReduce:function(e,t,i){var a=[].concat((0,n.default)(e),(0,n.default)(t),(0,n.default)(i));console.log(a);for(var o=a.length,l={},c=[],s=0;s<o;s++)l[JSON.stringify(a[s])]=!0;for(var r=Object.keys(l),g=0;g<r.length;g++)c.push(JSON.parse(r[g]));return c},cancelChecked:function(e,t){console.log(e,t);var i=[];if(e&&t)for(var a=0,n=e.length;a<n;a++)for(var o=0,l=t.length;o<l;o++)if(e[a].id==t[o].id&&e[a].selectRole==t[o].selectRole)return e.splice(a,1),i=e,i},creactAndUploadMeeting:function(e,t,i,a){console.log("创建或编辑会议-",e),o.globalData.ShowMsgUtil.showLoadToast("正在创建...");var n=this,l=o.globalData.StorageUtil.get("userInfoCach");n.setData({disabled:!0}),o.globalData.ShowMsgUtil.netErrNotice(),wx.request({url:t,method:i,header:{token:l.token,"content-type":"application/json"},data:e,success:function(e){if(wx.hideToast({}),console.log("创建会议返回",e.data),!e.data||200!=e.data.code)return n.setData({disabled:!1}),void o.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code);o.globalData.ShowMsgUtil.showSuccessToast("会议"+a+"成功",2e3),clearTimeout(),setTimeout((function(){n.clearStorageData(),o.globalData.PublicUtil.reLaunchByUrl(o.globalData.PageUrl.taBarPageUrl.indexUrl,500)}),2e3)},fail:function(){n.setData({disabled:!1}),wx.hideToast({}),o.globalData.ShowMsgUtil.showErrorModal("请求失败","网络有误")}})},timesToTime:function(e){var t=new Date(e),i=t.getTime(t);return i},clearStorageData:function(){o.globalData.StorageUtil.remove("hosterCach"),o.globalData.StorageUtil.remove("recoderCach"),o.globalData.StorageUtil.remove("attendeeCach"),o.globalData.StorageUtil.remove("attendeeStudentCach"),o.globalData.StorageUtil.remove("attendeeCach"),o.globalData.StorageUtil.remove("appiontInfoCach"),o.globalData.StorageUtil.remove("meetingId")}}};t.default=c}}]);