(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-indexModule-pages-inOrOutSchoolList-inOrOutSchoolList"],{"388c":function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i}));var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page"},[a("v-uni-view",{staticClass:"page__bd"},[a("navbar",{staticClass:"navbor",attrs:{tabs:e.tabs},on:{clickTabs:function(t){arguments[0]=t=e.$handleEvent(t),e.bindClickTabs.apply(void 0,arguments)}}}),a("v-uni-scroll-view",{style:"height: "+(e.windowHeight-e.statusHeight-e.h)+"px;",attrs:{"scroll-y":!0,"scroll-top":e.scrollTop,"lower-threshold":"10","upper-threshold":"10"},on:{scrolltolower:function(t){arguments[0]=t=e.$handleEvent(t),e.lower.apply(void 0,arguments)},scroll:function(t){arguments[0]=t=e.$handleEvent(t),e.scroll.apply(void 0,arguments)}}},[0==e.pageObj.list.length||void 0==e.pageObj.list?a("v-uni-view",{staticClass:"myui__bd"},[a("msg-no-data",{attrs:{msg:"暂无数据"}})],1):a("v-uni-view",{staticClass:"myui__bd"},[e._l(e.pageObj.list,(function(t,i){return a("v-uni-view",{key:i,staticStyle:{margin:"9rpx 10rpx"}},[a("v-uni-view",{staticClass:"weui-cells weui-cells_after-title",staticStyle:{margin:"15rpx 0rpx 0rpx"}},[a("v-uni-view",{staticClass:"weui-cell"},[a("v-uni-view",{staticClass:"weui-cell__bd",staticStyle:{color:"#20a4f7"}},[e._v(e._s(t.statusName))]),e.messagecontent?a("v-uni-view",{staticClass:"weui-cell__ft weui-cell__ft_in-access",staticStyle:{"font-size":"14px"},attrs:{"data-id":t.id},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toDetail.apply(void 0,arguments)}}},[e._v("详情")]):e._e(),e.messagecon?a("v-uni-view",{staticClass:"weui-cell__ft weui-cell__ft_in-access",staticStyle:{"font-size":"14px"},attrs:{"data-ind":i},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toDeta.apply(void 0,arguments)}}},[e._v("详情")]):e._e()],1)],1),a("v-uni-view",{staticClass:"weui-cells weui-cells_after-title myui-cells",staticStyle:{"font-size":"15px"}},[a("v-uni-view",{staticClass:"weui-cell",staticStyle:{"font-size":"18px","font-weight":"700"}},[e._v(e._s(t.title))]),e.timeshow?a("v-uni-view",{staticClass:"myui-cell"},[a("v-uni-view",{staticClass:"myui-cell__bd"},[e._v("申请时间段：")]),a("v-uni-view",{staticClass:"myui-cell__bf"},[e._v(e._s(t.time))])],1):e._e(),e.timesh?a("v-uni-view",{staticClass:"myui-cell"},[a("v-uni-view",{staticClass:"myui-cell__bd"},[e._v("申请时间：")]),a("v-uni-view",{staticClass:"myui-cell__bf"},[e._v(e._s(t.time))])],1):e._e(),e.fudaotelpjone?a("v-uni-view",{staticClass:"myui-cell"},[a("v-uni-view",{staticClass:"myui-cell__bd"},[e._v("铺导员：")]),a("v-uni-view",{staticClass:"myui-cell__bf"},[e._v(e._s(t.approvalUserName))])],1):e._e(),e.username?a("v-uni-view",{staticClass:"myui-cell"},[a("v-uni-view",{staticClass:"myui-cell__bd"},[e._v("用户姓名")]),a("v-uni-view",{staticClass:"myui-cell__bf"},[e._v(e._s(t.approvalUserName))])],1):e._e(),e.fudaotelpjone?a("v-uni-view",{staticClass:"myui-cell"},[a("v-uni-view",{staticClass:"myui-cell__bd"},[e._v("铺导员电话：")]),a("v-uni-view",{staticClass:"myui-cell__bf",staticStyle:{color:"#20a4f7"},attrs:{"data-mobile":t.approvalUserPhone,"data-name":t.approvalUserName},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.makePhoneCall.apply(void 0,arguments)}}},[e._v(e._s(t.approvalUserPhone))])],1):e._e(),a("v-uni-view",{staticClass:"myui-cell myui-time"},[a("v-uni-view",{staticClass:"myui-cell__bd"},[e._v("发布于")]),a("v-uni-view",{staticClass:"myui-cell__bf"},[e._v(e._s(t.applyTime))])],1)],1)],1)})),e.nomore?a("v-uni-view",{staticClass:"myui__bd",staticStyle:{"margin-top":"-300rpx"}},[a("msg-no-data",{attrs:{msg:"到底了"}})],1):e._e()],2)],1)],1)],1)},n=[]},"391a":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'/* pages/indexModule//pages/inOrOutSchoolList/inOrOutSchoolList.wxss */.myui-cell[data-v-2ca91cbe]{padding:%?6?% %?35?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.myui-cell-bottom[data-v-2ca91cbe]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#20a4f7;-webkit-align-content:center;align-content:center\r\n  /*align-items: center; */}.myui-cell-bottom[data-v-2ca91cbe]{padding:10px 15px;position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.myui-cell-bottom[data-v-2ca91cbe]:before{content:" ";position:absolute;left:0;top:0;right:0;height:1px;border-top:%?1?% solid #e5e5e5;color:#d9d9d9;left:15px}.myui-cell-bottom[data-v-2ca91cbe]:first-child:before{display:none}.myui-cell-bottom__bd[data-v-2ca91cbe]{width:50%}.myui-cell-bottom__fd[data-v-2ca91cbe]{width:50%;border-left:%?3?% #20a4f7 solid}.myui-cell__bd[data-v-2ca91cbe]{width:30%}.myui-cell__bf[data-v-2ca91cbe]{width:70%;color:#999}.myui-cells[data-v-2ca91cbe]{border:1px #fff solid}.myui-time[data-v-2ca91cbe]{font-size:14px;margin:%?20?% 0\r\n  /* border: 1px red solid; */}.myui-center[data-v-2ca91cbe]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.dangerNotice[data-v-2ca91cbe]{  /*删除按钮 红色提示*/color:red}',""]),e.exports=t},"6df6":function(e,t,a){var i=a("391a");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var l=a("4f06").default;l("2ab0fc9e",i,!0,{sourceMap:!1,shadowMode:!1})},"70e8":function(e,t,a){"use strict";a.r(t);var i=a("388c"),l=a("e4de");for(var n in l)"default"!==n&&function(e){a.d(t,e,(function(){return l[e]}))}(n);a("ddf5");var o,s=a("f0c5"),c=Object(s["a"])(l["default"],i["b"],i["c"],!1,null,"2ca91cbe",null,!1,i["a"],o);t["default"]=c.exports},8707:function(e,t){var a="/static/pages/indexModule/resources/pic",i={image:a,wx:"".concat(a,"/wx.png"),cardBg:"".concat(a,"/card-bg.png"),bankCard:"".concat(a,"/bankCard.png"),paymentCode:"".concat(a,"/paymentCode.png"),payroll:"".concat(a,"/payroll.png"),integral:"".concat(a,"/integral.png"),bandCardPic:"".concat(a,"/card-pic.jpg"),deviceOnLine:"".concat(a,"/device_on-line.png"),deviceOffLine:"".concat(a,"/device_off-line.png"),redLine:"".concat(a,"/red-line.png"),blueLine:"".concat(a,"/blue-line.png"),switchOpen:"".concat(a,"/switch_open.png"),switchClose:"".concat(a,"/switch_close.png"),paycode:"".concat(a,"/paycode.png"),switchForbit:"".concat(a,"/switch_forbit.png"),emmterOneWayOff:"".concat(a,"/emmter_one_way_off.png"),emmterOneWayOn:"".concat(a,"/emmter_one_way_on.png"),errIconImg:"".concat(a,"/errorNotice.png"),eleWalletImg:"".concat(a,"/ele-wallet.png"),eleWalletLImg:"".concat(a,"/ele-wallet-l.png"),eleWalletIKmg:"".concat(a,"/ele-wallet-2.png"),waterWalletImg:"".concat(a,"/water-wallet.png"),zywaterImg:"".concat(a,"/zy-water.png"),hotWaterImg:"".concat(a,"/hostwater.png"),yueWalletImg:"".concat(a,"/yue-wallet.png"),returnWalletImg:"".concat(a,"/return-wallet.png"),recordWalletImg:"".concat(a,"/record-wallet.png"),resultSuccessImg:"".concat(a,"/successPay.png"),resultFailPayImg:"".concat(a,"/failPay.png")};e.exports=i},cbff:function(e,t,a){"use strict";var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=i(a("b35c")),n=i(a("da5f")),o=getApp(),s=a("8707"),c={data:function(){return{pageObj:{list:[]},imageObj:s,tabs:["退宿","外宿","留校"],activeIndex:0,pullDownNumber:0,windowHeight:0,fudaotelpjone:!0,h:0,statusHeight:23,nomore:!1,isCanLoad:!0,recordCount:0,scrollTop:0,commlist:"",timeshow:!1,timesh:!0,username:!0,messagecontent:!1,messagecon:!0,refundmessage:[]}},components:{navbar:l.default,msgNoData:n.default},props:{},onLoad:function(e){this.handleListRecord(3,0,10),this.setData({windowHeight:wx.getSystemInfoSync().windowHeight})},onShow:function(){o.globalData.StorageUtil.remove("inOrOut"),this.setData({nomore:!1}),this.recordCount=0,this.isCanLoad=!0,console.log("4412");wx.createSelectorQuery();var e=this,t=o.globalData.SystemInfo.statusBarHeight;this.setData({statusHeight:t}),e.setData({h:50})},onPullDownRefresh:function(){var e,t=this;this.pageObj.list=[],t.setData({pullDownNumber:0}),console.log(this.commlist),0==this.commlist&&(e=3),1==this.commlist&&(e=2),2==this.commlist&&(e=1),console.log(this.commlist),this.handleListRecord(e,0,2)},onShareAppMessage:function(){},methods:{bindClickTabs:function(e){this.setData({nomore:!1});var t=e.detail.activeIndex;this.commlist=e.detail.activeIndex,console.log(this.commlist),this.pageObj.list=[],this.pullDownNumber=0,this.recordCount=0,this.isCanLoad=!0,this.setData({pullDownNumber:0,activeIndex:t}),this.dealStatusByActiveIndex(t,2,0)},dealStatusByActiveIndex:function(e,t,a){var i=[];0==e?i=3:1==e?i=2:2==e&&(i=1),this.handleListRecord(i,a,t)},handleListRecord:function(e,t,a){var i=this;o.globalData.ShowMsgUtil.netErrNotice();var l=o.globalData.StorageUtil.get("userInfoCach");wx.request({url:o.globalData.RequestUrl.baseRequestUrl.inOrOutSchoolLists+"?applyType="+e+"&skip="+t+"&take="+a,method:"GET",header:{token:l.token},success:function(e){if(wx.hideToast({}),console.log("获取申请列表返回",e.data),i.refundmessage=e.data,e.data&&200==e.data.code){var t=i.dealPageObj(e.data.data);i.setData({pageObj:t}),i.setData({nomore:!1}),e.data.data.length!=i.recordCount?(i.pullDownNumber++,i.recordCount=e.data.data.length,i.isCanLoad=!0):(console.log("没有数据更新"),i.setData({isCanLoad:!1,nomore:!0}),console.log(i.nomore))}else o.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code)},fail:function(){o.globalData.ShowMsgUtil.showNoneToastByFail()},complete:function(){uni.stopPullDownRefresh()}})},dealPageObj:function(e){var t={},a=[];console.log(this.commlist),console.log(e.length);for(var i=0;i<e.length;i++){var l={};l.id=e[i].id,l.title=e[i].title,l.status=e[i].status,l.statusName=this.handleStatus(e[i].status),l.applyTime=e[i].applyTime,l.time=e[i].applyStartTime+" - "+e[i].applyEndTime,l.approvalUserName=e[i].approvalUserName,l.approvalUserPhone=e[i].approvalUserPhone,l.userName=e[i].userName,0==this.commlist?(l.statusName="退宿申请",l.applyTime=e[i].createTime,l.time=e[i].createTime,l.approvalUserName=e[i].name,this.timesh=!0,this.fudaotelpjone=!1,this.timeshow=!1,this.username=!0,this.messagecon=!0,this.messagecontent=!1):(this.messagecon=!1,this.timesh=!1,this.timeshow=!0,this.fudaotelpjone=!0,this.username=!1,this.messagecontent=!0),a[i]=l}return t.list=a,console.log("页面显示数据 - ",a),t},handleStatus:function(e){switch(e){case-1:return"审核拒绝";case 0:return"申请中";case 1:return"审核通过";default:return"未知"}},makePhoneCall:function(e){var t=e.currentTarget.dataset.mobile,a=e.currentTarget.dataset.name;wx.showModal({title:"呼叫",content:"拨打"+a+"的电话"+t,cancelText:"取消",confirmText:"拨打",confirmColor:"#20a4f7",success:function(e){e.confirm?wx.makePhoneCall({phoneNumber:t}):e.cancel&&console.log("用户点击取消")}})},toDetail:function(e){console.log(e),o.globalData.PublicUtil.navigateByUrl(o.globalData.PageUrl.indexPageUrl.inOrOutSchoolDetailUrl+"?recordId="+e.target.dataset.id,500)},toDeta:function(e){console.log(e);var t=e.currentTarget.dataset.ind;console.log(t),console.log(this.refundmessage.data[t]),o.globalData.StorageUtil.set("inOrOut",this.refundmessage.data[t]),o.globalData.PublicUtil.navigateByUrl(o.globalData.PageUrl.indexPageUrl.inOrOut,500)},reflesh:function(e){var t=e,a=0;2==t.activeIndex?a=3:1==t.activeIndex?a=2:0==t.activeIndex&&(a=1),this.handleListRecord(a,0,2)},lower:function(){console.log("41");var e=this;console.log(e.activeIndex);var t=0;2==e.activeIndex?t=1:1==e.activeIndex?t=2:0==e.activeIndex&&(t=3),this.isCanLoad&&(o.globalData.ShowMsgUtil.showLoadAndMsgToast(),this.handleListRecord(t,0,2*(this.pullDownNumber+1)))},scroll:function(e){}}};t.default=c},ddf5:function(e,t,a){"use strict";var i=a("6df6"),l=a.n(i);l.a},e4de:function(e,t,a){"use strict";a.r(t);var i=a("cbff"),l=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=l.a}}]);