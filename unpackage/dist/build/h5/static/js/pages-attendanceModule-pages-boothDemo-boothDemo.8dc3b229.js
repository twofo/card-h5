(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-attendanceModule-pages-boothDemo-boothDemo"],{"12a9":function(e,t,i){"use strict";i.r(t);var o=i("8f4a"),a=i("4be9");for(var s in a)"default"!==s&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("b963");var n,c=i("f0c5"),d=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,"2787d6fa",null,!1,o["a"],n);t["default"]=d.exports},"333d":function(e,t,i){var o=i("4a7f");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=i("4f06").default;a("71886743",o,!0,{sourceMap:!1,shadowMode:!1})},"4a7f":function(e,t,i){var o=i("24fb");t=o(!1),t.push([e.i,"uni-page-body[data-v-2787d6fa]{background-color:#f8f8f8}.container[data-v-2787d6fa]{padding:0 %?30?% 0 %?30?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.list-item[data-v-2787d6fa]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%;padding:10px 0 10px 0;box-sizing:border-box;border:1px solid #000;border-style:none none solid none;border-bottom-color:#d3d3d3}.list-item[data-v-2787d6fa]:last-child{border-style:none}.button[data-v-2787d6fa]{position:fixed;width:%?690?%;bottom:%?30?%}body.?%PAGE?%[data-v-2787d6fa]{background-color:#f8f8f8}",""]),e.exports=t},"4be9":function(e,t,i){"use strict";i.r(t);var o=i("5bcb"),a=i.n(o);for(var s in o)"default"!==s&&function(e){i.d(t,e,(function(){return o[e]}))}(s);t["default"]=a.a},"5bcb":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=getApp(),a={data:function(){return{searching:!1,devicesList:[],list_height:""}},components:{},props:{},onLoad:function(e){var t=this,i=(o.globalData.SystemInfo.windowHeight-50)*(750/o.globalData.SystemInfo.windowWidth)-60;t.setData({list_height:i}),wx.onBluetoothAdapterStateChange((function(e){console.log(e),t.setData({searching:e.discovering}),e.available||t.setData({searching:!1})})),wx.onBluetoothDeviceFound((function(e){var i=!0;if(e.deviceId){e.advertisData?e.advertisData=o.globalData.buf2hex(e.advertisData):e.advertisData="",console.log(e);for(var a=0;a<t.devicesList.length;a++)e.deviceId==t.devicesList[a].deviceId&&(i=!1);i&&t.devicesList.push(e)}else if(e.devices){e.devices[0].advertisData?e.devices[0].advertisData=o.globalData.buf2hex(e.devices[0].advertisData):e.devices[0].advertisData="",console.log(e.devices[0]);for(a=0;a<t.devicesList.length;a++)e.devices[0].deviceId==t.devicesList[a].deviceId&&(i=!1);i&&t.devicesList.push(e.devices[0])}else if(e[0]){e[0].advertisData?e[0].advertisData=o.globalData.buf2hex(e[0].advertisData):e[0].advertisData="",console.log(e[0]);for(a=0;a<devices_list.length;a++)e[0].deviceId==t.devicesList[a].deviceId&&(i=!1);i&&t.devicesList.push(e[0])}t.setData({devicesList:t.devicesList})}))},onReady:function(){},onShow:function(){},onHide:function(){var e=this;e.setData({devicesList:[]}),this.searching&&wx.stopBluetoothDevicesDiscovery({success:function(t){console.log(t),e.setData({searching:!1})}})},methods:{Search:function(){var e=this;e.searching?wx.stopBluetoothDevicesDiscovery({success:function(t){console.log(t),e.setData({searching:!1})}}):wx.closeBluetoothAdapter({complete:function(t){console.log(t),wx.openBluetoothAdapter({success:function(t){console.log(t),wx.getBluetoothAdapterState({success:function(e){console.log(e)}}),wx.startBluetoothDevicesDiscovery({allowDuplicatesKey:!1,success:function(t){console.log("设备信息2--"+t),e.setData({searching:!0,devicesList:[]})}})},fail:function(t){console.log(t),wx.showModal({title:"提示",content:"请检查手机蓝牙是否打开",showCancel:!1,success:function(t){e.setData({searching:!1})}})}})}})},Connect:function(e){var t,i=this;console.log(e.currentTarget.id);for(var o=0;o<i.devicesList.length;o++)e.currentTarget.id==i.devicesList[o].deviceId&&(t=i.devicesList[o].name,i.devicesList[o].advertisData);wx.stopBluetoothDevicesDiscovery({success:function(e){console.log(e),i.setData({searching:!1})}}),wx.showLoading({title:"连接蓝牙设备中..."}),wx.createBLEConnection({deviceId:e.currentTarget.id,success:function(i){console.log(i),wx.hideLoading(),wx.showToast({title:"连接成功",icon:"success",duration:1e3}),wx.navigateTo({url:"../device/device?connectedDeviceId="+e.currentTarget.id+"&name="+t})},fail:function(e){console.log(e),wx.hideLoading(),wx.showModal({title:"提示",content:"连接失败",showCancel:!1})}})}}};t.default=a},"8f4a":function(e,t,i){"use strict";var o;i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"container"},[i("v-uni-scroll-view",{style:"width:690rpx;height:"+e.list_height+"rpx",attrs:{"scroll-y":!0}},[e._l(e.devicesList,(function(t,o){return[i("v-uni-view",{key:o+"_0",staticClass:"list-item",attrs:{id:t.deviceId},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.Connect.apply(void 0,arguments)}}},[i("v-uni-view",{staticStyle:{display:"flex","flex-direction":"column",width:"80%"}},[i("v-uni-text",{staticStyle:{"font-size":"medium","word-break":"break-all"}},[e._v("设备名称: "+e._s(t.name))]),i("v-uni-text",{staticStyle:{"font-size":"x-small",color:"gray","word-break":"break-all"}},[e._v("设备ID: "+e._s(t.deviceId))]),i("v-uni-text",{staticStyle:{"font-size":"x-small",color:"gray","word-break":"break-all"}},[e._v("信号强度RSSI: "+e._s(t.RSSI))])],1),i("v-uni-image",{staticStyle:{width:"36px",height:"36px"},attrs:{mode:"aspectFit",src:"/static/images/bluetooth.png"}})],1)]}))],2),i("v-uni-button",{staticClass:"button",attrs:{type:"primary",loading:e.searching},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.Search.apply(void 0,arguments)}}},[e._v(e._s(e.searching?"搜索中...":"搜索蓝牙设备"))])],1)},s=[]},b963:function(e,t,i){"use strict";var o=i("333d"),a=i.n(o);a.a}}]);