(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-attendanceModule-pages-dutyTeacher-dutyTeacher"],{"119f":function(e,t,o){"use strict";var a=o("4ea4");o("e25e"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(o("e8d7")),n=getApp(),l={data:function(){return{checkboxItems:[],disableds:!0,stidentCount:!1,isCheckAllShow:!1,sHeight:500,loadNotice:"下拉加载更多",nomore:!1,currentPage:0,totalPage:null,roomType:2,limitSelectPerson:null,oldId:null,oomType:"",startT:"",endT:"",danceObj:"",triggered:!1}},components:{selectRecevice:s.default},props:{},resfresh:function(e){console.log(11111111)},onLoad:function(e){console.log(n.globalData.SystemInfo);var t=n.globalData.SystemInfo.windowHeight-150;if(console.log(t),e.roomType){var o,a;this.setData({oomType:e.roomType,limitSelectPerson:e.limitSelectPerson,startT:e.startTime,endT:e.endTime}),"dutyTeacher"==e.limitSelectPerson&&(o=4,a=16,uni.setNavigationBarTitle({title:"公共资源_练功房预约_责任教师"}));var s=e.startTime,l=e.endTime;this.searchPersonnel(o,a,s,l,5),this.setData({searchType:o,roleType:a,startT:s,endT:l,take:5}),e.id&&this.setData({oldId:e.id})}var r=[];this.setData({sHeight:t,checkboxItems:r})},onShow:function(){},onPullDownRefresh:function(e){console.log(this.searchType);var t=this.searchType,o=this.roleType,a=this.startT,s=this.endT,n=this.take;n>=5&&(n+=5),this.searchPersonnel(t,o,a,s,n),wx.stopPullDownRefresh()},methods:{searchPersonnel:function(e,t,o,a,s){console.log(s);var l=this;n.globalData.ShowMsgUtil.netErrNotice();var r=n.globalData.StorageUtil.get("userInfoCach");wx.request({url:n.globalData.RequestUrl.appointmentRequestUrl.searchPersonnel+"?searchType="+e+"&roleType="+t+"&startTime="+o+"&endTime="+a+"&take="+s,method:"GET",header:{token:r.token},success:function(e){if(wx.hideToast({}),console.log('人员搜素返回"',e.data),!e.data||200!=e.data.code)return n.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code),void l.setData({loadNotice:"加载失败"});var t=[],o=e.data.rows.peoples.length,a=e.data.rows.sum;if(console.log(a),o<=0)l.setData({checkboxItems:e.data.rows.peoples});else{o!=l.currentPage&&o<a?l.setData({loadNotice:"上拉加载更多"}):l.setData({loadNotice:"到底了",nomore:!0});for(var s=0;s<e.data.rows.peoples.length;++s){var r={};if(null!=l.oldId)var i=l.dealSelectPerson(l.oldId,e.data.rows.peoples[s]);r.id=e.data.rows.peoples[s].selectId,r.name=e.data.rows.peoples[s].selectName,r.selectType=e.data.rows.peoples[s].selectType,r.selectRole=e.data.rows.peoples[s].selectRole,r.isHasChild=e.data.rows.peoples[s].isHasChild;var c=e.data.rows.peoples[s].selectRole+e.data.rows.peoples[s].selectId+e.data.rows.peoples[s].selectType;r.value=String(c),r.checked=i,t[s]=r}console.log(t),l.setData({disableds:!1,currentPage:o,checkboxItems:t})}},fail:function(){n.globalData.ShowMsgUtil.showNoneToastByFail()}})},dealSelectPerson:function(e,t){return console.log(e),console.log(t),parseInt(e)==t.selectId},onMyEvent:function(e){console.log(e);var t=e.detail,o=t.checkboxItems;if(o.length<=0)n.globalData.ShowMsgUtil.showNoneToast("必须选择一位教师",1500);else if(o.length>1)n.globalData.ShowMsgUtil.showNoneToast("只能选择一位教师",1500);else{var a={dutyTeacher:o[0].name,id:o[0].id};uni.$emit("updateDutyteacher",{danceObj:a}),wx.navigateBack({delta:1})}},singleChecked:function(e){console.log("单选",e),this.setData({disableds:!1})},lower:function(e){console.log(e);e.detail.touchEnd;var t=this.nomore;if(!t){var o,a,s=this.startT,n=this.endT;"dutyTeacher"==this.limitSelectPerson&&(o=4,a=16),this.searchPersonnel(o,a,s,n,2*this.currentPage),this.setData({loadNotice:"加载中"})}}}};t.default=l},1681:function(e,t,o){"use strict";var a;o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){return a}));var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-uni-view",[o("select-recevice",{attrs:{checkboxItems:e.checkboxItems,isCheckAllShow:e.isCheckAllShow,sHeight:e.sHeight,stidentCount:e.stidentCount,disableds:e.disableds,loadNotice:e.loadNotice},on:{lower:function(t){arguments[0]=t=e.$handleEvent(t),e.lower.apply(void 0,arguments)},singleChecked:function(t){arguments[0]=t=e.$handleEvent(t),e.singleChecked.apply(void 0,arguments)},myevent:function(t){arguments[0]=t=e.$handleEvent(t),e.onMyEvent.apply(void 0,arguments)},refresherpulling:function(t){arguments[0]=t=e.$handleEvent(t),e.resfresh.apply(void 0,arguments)}}})],1)},n=[]},"476b":function(e,t,o){"use strict";o.r(t);var a=o("1681"),s=o("9b58");for(var n in s)"default"!==n&&function(e){o.d(t,e,(function(){return s[e]}))}(n);o("d575");var l,r=o("f0c5"),i=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"64de1f55",null,!1,a["a"],l);t["default"]=i.exports},"87b5":function(e,t,o){var a=o("fede");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=o("4f06").default;s("00004419",a,!0,{sourceMap:!1,shadowMode:!1})},"9b58":function(e,t,o){"use strict";o.r(t);var a=o("119f"),s=o.n(a);for(var n in a)"default"!==n&&function(e){o.d(t,e,(function(){return a[e]}))}(n);t["default"]=s.a},d575:function(e,t,o){"use strict";var a=o("87b5"),s=o.n(a);s.a},fede:function(e,t,o){var a=o("24fb");t=a(!1),t.push([e.i,"/* pages/attendanceModule//pages/dutyTeacher/dutyTeacher.wxss */",""]),e.exports=t}}]);