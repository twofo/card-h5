(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-indexModule-pages-bankCard-bankCard"],{"33e4":function(a,t,e){var n=e("24fb");t=n(!1),t.push([a.i,".addBankCard[data-v-33a23f04]{width:94%;height:%?150?%;margin-left:3%;margin-top:%?20?%;background:#fff;border-radius:%?10?%;padding:%?20?% 0}.center[data-v-33a23f04]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.bankCard-box[data-v-33a23f04]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.bankCard-pic[data-v-33a23f04]{width:%?100?%;height:%?100?%}.bank-name[data-v-33a23f04]{width:32%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;margin-left:%?30?%}.bank-name-1[data-v-33a23f04]{font-size:18px}.bank-name-2[data-v-33a23f04]{font-size:18px;margin-top:%?20?%}.cardNumber[data-v-33a23f04]{width:38%;height:%?90?%;margin-top:%?100?%;margin-left:%?25?%}",""]),a.exports=t},"6eb6":function(a,t,e){"use strict";e.r(t);var n=e("d0c5"),o=e("c864");for(var i in o)"default"!==i&&function(a){e.d(t,a,(function(){return o[a]}))}(i);e("cfe8");var r,c=e("f0c5"),l=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"33a23f04",null,!1,n["a"],r);t["default"]=l.exports},8707:function(a,t){var e="/static/pages/indexModule/resources/pic",n={image:e,wx:"".concat(e,"/wx.png"),cardBg:"".concat(e,"/card-bg.png"),bankCard:"".concat(e,"/bankCard.png"),paymentCode:"".concat(e,"/paymentCode.png"),payroll:"".concat(e,"/payroll.png"),integral:"".concat(e,"/integral.png"),bandCardPic:"".concat(e,"/card-pic.jpg"),deviceOnLine:"".concat(e,"/device_on-line.png"),deviceOffLine:"".concat(e,"/device_off-line.png"),redLine:"".concat(e,"/red-line.png"),blueLine:"".concat(e,"/blue-line.png"),switchOpen:"".concat(e,"/switch_open.png"),switchClose:"".concat(e,"/switch_close.png"),paycode:"".concat(e,"/paycode.png"),switchForbit:"".concat(e,"/switch_forbit.png"),emmterOneWayOff:"".concat(e,"/emmter_one_way_off.png"),emmterOneWayOn:"".concat(e,"/emmter_one_way_on.png"),errIconImg:"".concat(e,"/errorNotice.png"),eleWalletImg:"".concat(e,"/ele-wallet.png"),eleWalletLImg:"".concat(e,"/ele-wallet-l.png"),eleWalletIKmg:"".concat(e,"/ele-wallet-2.png"),waterWalletImg:"".concat(e,"/water-wallet.png"),zywaterImg:"".concat(e,"/zy-water.png"),hotWaterImg:"".concat(e,"/hostwater.png"),yueWalletImg:"".concat(e,"/yue-wallet.png"),returnWalletImg:"".concat(e,"/return-wallet.png"),recordWalletImg:"".concat(e,"/record-wallet.png"),resultSuccessImg:"".concat(e,"/successPay.png"),resultFailPayImg:"".concat(e,"/failPay.png")};a.exports=n},"8bcb":function(a,t,e){var n=e("33e4");"string"===typeof n&&(n=[[a.i,n,""]]),n.locals&&(a.exports=n.locals);var o=e("4f06").default;o("1134030e",n,!0,{sourceMap:!1,shadowMode:!1})},c864:function(a,t,e){"use strict";e.r(t);var n=e("d1f0"),o=e.n(n);for(var i in n)"default"!==i&&function(a){e.d(t,a,(function(){return n[a]}))}(i);t["default"]=o.a},cfe8:function(a,t,e){"use strict";var n=e("8bcb"),o=e.n(n);o.a},d0c5:function(a,t,e){"use strict";var n;e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){return n}));var o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-uni-view",{staticClass:"page"},[a.showBankInfo.length>0?e("v-uni-view",a._l(a.showBankInfo,(function(t,n){return e("v-uni-view",{key:n},[e("v-uni-view",{staticClass:"addBankCard bankCard-box",attrs:{id:n},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.deleteCard.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"bankCard-pic",attrs:{src:a.indexModuleUrl.bandCardPic}}),e("v-uni-view",{staticClass:"bank-name"},[e("v-uni-text",{staticClass:"bank-name-1"},[a._v(a._s(t.bankName))]),e("v-uni-text",{staticStyle:{"font-size":"15px"}},[a._v(a._s(t.cardTypeName))])],1),e("v-uni-view",{staticClass:"cardNumber"},[a._v(a._s(t.bankCard))])],1)],1)})),1):a._e(),e("v-uni-view",{staticClass:"addBankCard center",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.goToPage("/pages/indexModule/pages/addBankCard/addBankCard")}}},[e("v-uni-text",[a._v("+ 添加银行卡")])],1)],1)},i=[]},d1f0:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=getApp(),o=e("27cd"),i=e("8707"),r={data:function(){return{indexModuleUrl:i,showBankInfo:[],bankCardList:[],count:0}},components:{},props:{},onLoad:function(){console.log("------------------------银行卡------------------------");var a=n.globalData.StorageUtil.get("userInfoCach");this.requestQueryBankCardList(a)},onShow:function(){var a=this.count;if(0!=a){console.log("------------------------银行卡------------------------");var t=n.globalData.StorageUtil.get("userInfoCach");this.requestQueryBankCardList(t)}this.setData({count:1})},methods:{goToPage:function(a){uni.navigateTo({url:a})},requestQueryBankCardList:function(a){n.globalData.ShowMsgUtil.netErrNotice(),n.globalData.ShowMsgUtil.showLoadAndMsgToast();var t=this;wx.request({url:n.globalData.RequestUrl.baseRequestUrl.listIotBankCard,header:{token:a.token,"content-type":"application/json"},method:"POST",success:function(a){console.log("银行卡查询列表返回",a.data),a.data&&200==a.data.code?(t.setData({bankCardList:a.data.rows}),t.showBankInfoFun(a.data.rows.bankCardList)):n.globalData.ShowMsgUtil.showErrorModal("请求失败",a.data.msg,a.data.code)},fail:function(){n.globalData.ShowMsgUtil.showNoneToastByFail()},complete:function(){wx.hideToast({})}})},showBankInfoFun:function(a){for(var t=[],e=0;e<a.length;++e){var n={},i=o.bankCardAttribution(a[e].cardNumber);"error"===i?(n.bankName="未知",n.cardTypeName="无法识别",n.bankCard=this.bankCard(a[e].cardNumber)):(n.bankName=i.bankName,n.cardTypeName=i.cardTypeName,n.bankCard=this.bankCard(a[e].cardNumber)),t[e]=n}this.setData({showBankInfo:t})},bankCard:function(a){for(var t="",e=0;e<a.length-4;++e)t+="*";return t+=a.substring(a.length-4,a.length),t},deleteCard:function(a){var t=this,e=a.currentTarget.id,o=n.globalData.StorageUtil.get("userInfoCach");wx.showModal({title:"提示",content:"是否删除该银行卡?",success:function(a){a.confirm&&wx.request({url:n.globalData.RequestUrl.baseRequestUrl.deleteBankCard,data:{cardId:t.bankCardList.bankCardList[e].cardId},method:"POST",header:{token:o.token,"content-type":"application/json"},success:function(a){console.log("删除银行卡返回",a.data),a.data&&200==a.data.code?(n.globalData.ShowMsgUtil.showSuccessToast("删除成功",2e3),t.requestQueryBankCardList(o)):n.globalData.ShowMsgUtil.showErrorModal("请求失败",a.data.msg,a.data.code)},fail:function(){n.globalData.ShowMsgUtil.showNoneToastByFail()}})}})}}};t.default=r}}]);