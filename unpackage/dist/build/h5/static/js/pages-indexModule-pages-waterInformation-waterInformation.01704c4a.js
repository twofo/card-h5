(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-indexModule-pages-waterInformation-waterInformation"],{1557:function(e,t,a){"use strict";a.r(t);var i=a("cfab"),o=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=o.a},"3cd3":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".container[data-v-1ff879bf]{box-sizing:border-box;padding:%?30?%;background:#fefefe}.remind-btn[data-v-1ff879bf]{background-color:#ffcb63;border-color:#e0b358}.result-page[data-v-1ff879bf]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column;flex-flow:column;-webkit-box-align:stretch;-webkit-align-items:stretch;align-items:stretch;font-size:11pt}.result-model[data-v-1ff879bf]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column;flex-flow:column;border-radius:3px;color:#666;background-color:#faf9f7;overflow:hidden}.result-userInfo[data-v-1ff879bf]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:stretch;-webkit-align-items:stretch;align-items:stretch;padding-top:%?35?%;padding-left:%?30?%\r\n\t/* padding: 35rpx 30rpx; */}.select[data-v-1ff879bf]{padding-left:%?22?%}.userInfo-dormitory[data-v-1ff879bf]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:%?10?% 0 %?20?%}.dormitory-info[data-v-1ff879bf]{font-size:20pt;line-height:150%;letter-spacing:1px}.dormitory-resetBtn[data-v-1ff879bf]{font-size:9pt;padding:%?5?% %?20?%;text-align:center;background-color:#ffcb63;border-radius:3px;color:#fff}.userInfo-basic[data-v-1ff879bf]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;color:#888}.basic-name[data-v-1ff879bf]{width:50%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;font-size:11pt;line-height:150%}.result-chargeInfo[data-v-1ff879bf]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.chargeInfo-model[data-v-1ff879bf]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:%?35?% %?30?%}.chargeInfo-num[data-v-1ff879bf]{margin-right:%?10?%}.chargeInfo-cost[data-v-1ff879bf]{\r\n\t/* margin-left: 10rpx; */}.chargeInfo-model-title[data-v-1ff879bf]{font-size:%?26?%\r\n\t/* margin-bottom: 30rpx; */}.chargeInfo-model-info[data-v-1ff879bf]{text-align:left}.model-info[data-v-1ff879bf]{color:#333;font-weight:700;font-size:20pt;line-height:120%;margin-right:%?6?%}.result-specificInfo[data-v-1ff879bf]{padding:%?35?% %?30?%}.specificInfo-item[data-v-1ff879bf]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?25?% 0}.specificInfo-item-label[data-v-1ff879bf]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.specificInfo-item-value[data-v-1ff879bf]{color:#888;font-weight:700;font-size:12pt;margin-right:%?10?%}.sdf-bg[data-v-1ff879bf]{position:fixed;width:%?750?%;height:%?90?%;bottom:%?-2?%;left:0;right:0}.list-box[data-v-1ff879bf]{\r\n\t/* margin-top: 20rpx; */}.page-cont[data-v-1ff879bf]{background-color:#fff;color:#333}.page_top-box[data-v-1ff879bf]{display:-webkit-box;display:-webkit-flex;display:flex;z-index:500;top:0;width:98%;\r\n\t/* height: 70rpx; */\r\n\t/* padding: auto 10rpx; */background:#fff\r\n\t/* padding-left: 10rpx; */}.tabbarItem[data-v-1ff879bf]{padding:0 %?30?%}.activeBar[data-v-1ff879bf]{border-bottom:%?2?% solid #20a4f7;font-weight:bolder;color:#20a4f7}.page_navbar-title[data-v-1ff879bf]{display:inline-block;font-size:15px;max-width:8em;width:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;padding-top:%?10?%}.deviceEcharts[data-v-1ff879bf]{\r\n\t/* margin-top: 30rpx; */box-sizing:border-box}.btmArrow[data-v-1ff879bf]{display:inline-block;width:%?10?%;height:%?10?%;border-bottom:%?4?% solid #999;border-right:%?4?% solid #999;-webkit-transform:rotate(45deg);transform:rotate(45deg);margin-bottom:%?4?%;margin-left:%?6?%}.canvas[data-v-1ff879bf]{width:%?750?%;height:%?500?%;background:#fff\r\n\t/* border: 1px red solid; */}.title-box[data-v-1ff879bf]{background:#fff;padding-top:%?10?%;height:%?60?%;margin-bottom:.1em;padding-left:15px;padding-right:15px;font-size:16px}.content-ending[data-v-1ff879bf]{width:100%;color:#bbb;text-align:center;margin:%?30?% auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}",""]),e.exports=t},"59cb":function(e,t,a){var i=a("3cd3");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("4f06").default;o("5ed21b0a",i,!0,{sourceMap:!1,shadowMode:!1})},"65e4":function(e,t,a){"use strict";var i=a("4ea4");a("b680"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("6b13")),n=getApp(),s=a("dabd"),r=0,l=null,c={data:function(){return{remind:"加载中",renderData:{},renderDataOfEle:{},userInfoCach:{},deviceType:[{name:"冷水量统计",click:"deviceClick"},{name:"热水量统计",click:"deviceClick"},{name:"电量统计",click:"deviceClick"}],deviceIndex:0,selectTime:["近一周","近一个月"],selectTimeInd:0,news:[],windowHeight:"",listLength:1,consumeValue:{},imageWidth:"",windowWidth:""}},components:{feeLists:o.default},props:{},onLoad:function(){console.log("142");var e=n.globalData.StorageUtil.get("userInfoCach");if(null!=e.roomInfo){var t=e.roomInfo.roomName,a=e.roomInfo.buildName,i=e.roomInfo.floorName;e.roomInfo.roomName=t,e.roomInfo.buildName=a,e.roomInfo.floorName=i}this.setData({userInfoCach:e,imageWidth:wx.getSystemInfoSync().windowWidth,windowHeight:wx.getSystemInfoSync().windowHeight,windowWidth:wx.getSystemInfoSync().windowWidth}),r=this.imageWidth/360,this.getUsageByRoom(3),this.deviceUseStatistics(3,4),this.errorInform(2,10,0)},methods:{bindPickerChange:function(e){console.log(e);n.globalData.StorageUtil.get("userInfoCach");var t=e.detail.value;console.log(this.deviceIndex);var a=4;console.log("deviceType - ",a),console.log(t);var i=0==t?3:1;console.log(i),this.setData({selectTimeInd:t}),this.deviceUseStatistics(i,a),this.getUsageByRoom(i)},deviceUseStatistics:function(e,t){var a=this;n.globalData.ShowMsgUtil.netErrNotice();var i=[],o=[];console.log(t);var s=2==t||8==t?"用水量":"用电量",r=n.globalData.StorageUtil.get("userInfoCach");console.log("timeType - ",e),console.log("deviceType - ",t),wx.request({url:n.globalData.RequestUrl.baseRequestUrl.deviceUseStatistics+"?timeType="+e+"&areaType=2&deviceType="+t,method:"GET",header:{token:r.token},success:function(e){if(console.log("获取用量统计返回 - ",e.data),e.data&&200==e.data.code){for(var t=e.data.data,r=0;r<t.length;r++)i[r]=t[r].days,o[r]=t[r].useUsage;var l=Math.max.apply(Math,o);0==Math.max.apply(Math,o)&&(l=.1),a.lineCharts(i,o,s,l)}else n.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code)},fail:function(){n.globalData.ShowMsgUtil.showNoneToastByFail()}})},lineCharts:function(e,t,a,i){l=new s({canvasId:"lineCanvas",type:"column",categories:e,animation:!1,series:[{name:a,data:t,format:function(e){return e}}],yAxis:{format:function(e){return e.toFixed(2)},min:0,max:i},xAxis:{disableGrid:!0},extra:{column:{width:20}},width:330*r,height:230*r,dataLabel:!0,dataPointShape:!0,enableScroll:!0})},touchHandler:function(e){l.scrollStart(e)},moveHandler:function(e){l.scroll(e)},touchEndHandler:function(e){l.scrollEnd(e),l.showToolTip(e,{format:function(e,t){return t+" "+e.name+":"+e.data}})},errorInform:function(e,t,a){var i=this;n.globalData.ShowMsgUtil.netErrNotice();var o=n.globalData.StorageUtil.get("userInfoCach"),s=i.news.length;wx.request({url:n.globalData.RequestUrl.baseRequestUrl.errorInform+"?deviceTypeId="+e+"&take="+t+"&skip="+a,method:"GET",header:{token:o.token},success:function(e){if(wx.hideToast({}),e.data&&200==e.data.code){i.pullDownNumber++,e.data.rows=i.dealRecord(e.data.data);var t={listLength:s,news:e.data.rows};i.setData(t)}else n.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code)},fail:function(){n.globalData.ShowMsgUtil.showNoneToastByFail()}})},dealRecord:function(e){for(var t=[],a=0;a<e.length;a++){var i={};i.floorName=e[a].buildName,i.roomname=e[a].roomName,i.errTime=e[a].alarmTime,i.deviceType=e[a].deviceTypeId,i.errDesc=e[a].alarmInfo,t[a]=i}return t},getUsageByRoom:function(e){var t=this;n.globalData.ShowMsgUtil.netErrNotice();var a=n.globalData.StorageUtil.get("userInfoCach");if(console,null==a.roomInfo){var i={usageSumMouth:0,usageTotalEle:0,usageEleMouth:0};return i.usageEleMouth=0,i.usageTotalColdWater=0,i.usageColdWaterMouth=0,i.usageTotalHotWater=0,i.usageHotWaterMouth=0,i.today=n.globalData.PublicUtil.formatTimeTwo(new Date,"Y-M-D h:m"),void t.setData({renderData:i})}wx.request({url:n.globalData.RequestUrl.baseRequestUrl.getUsageByRoom,data:{roomId:a.roomInfo.roomId,timeType:e},method:"GET",header:{token:a.token},success:function(e){if(console.log("获取水电信息返回",e.data),e.data&&200===e.data.code){var a=e.data.data;a?(a.today=a.today.substring(0,16),console.log(a),t.setData({renderData:a})):t.setData({remind:"暂无数据"})}else n.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code)},fail:function(e){n.globalData.ShowMsgUtil.showNoneToastByFail()},complete:function(){wx.hideNavigationBarLoading()}})},deviceClick:function(e){var t=e.currentTarget.id,a=0==this.selectTimeInd?3:1,i=0==t?2:1==t?8:4;this.setData({deviceIndex:t}),this.deviceUseStatistics(a,i),1==t?this.errorInform(4,10,0):this.errorInform(2,10,0)},bindPullUp:function(){var e,t=this.deviceIndex;e=0==t?2:4,this.errorInform(e,10*(this.pullDownNumber+1),0)}}};t.default=c},"6b13":function(e,t,a){"use strict";a.r(t);var i=a("8b1f"),o=a("1557");for(var n in o)"default"!==n&&function(e){a.d(t,e,(function(){return o[e]}))}(n);a("b3fe");var s,r=a("f0c5"),l=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"bb5284f8",null,!1,i["a"],s);t["default"]=l.exports},"6e04":function(e,t,a){"use strict";a.r(t);var i=a("65e4"),o=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=o.a},"7a7b":function(e,t,a){var i=a("c235");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("4f06").default;o("4486d825",i,!0,{sourceMap:!1,shadowMode:!1})},"87dd":function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"result-page"},[a("v-uni-view",{staticClass:"result-userInfo result-model"},[a("v-uni-view",{staticClass:"userInfo-basic",staticStyle:{overflow:"hidden"}},[a("v-uni-view",{staticClass:"basic-name",staticStyle:{width:"100%",height:"23px","font-size":"32rpx",color:"#333333","font-family":"inherit","font-weight":"550"}},[a("v-uni-text",{staticClass:"myui-left__title"}),null!=e.userInfoCach.roomInfo?a("v-uni-text",[e._v("房间: "+e._s(e.userInfoCach.roomInfo.buildName)+"  - "+e._s(e.userInfoCach.roomInfo.floorName)+" - "+e._s(e.userInfoCach.roomInfo.roomName))]):a("v-uni-text",[e._v("（暂未分配寝室）")])],1)],1),a("v-uni-view",{staticClass:"basic-name",staticStyle:{width:"82%","margin-top":"20rpx"}},[a("v-uni-text",{staticClass:"myui-left__title"}),a("v-uni-text",[e._v("截至时间："+e._s(e.renderData.today))])],1)],1),a("v-uni-view",{staticClass:"result-chargeInfo"},[e.renderData.usageEleMouth>0?a("v-uni-view",{staticClass:"chargeInfo-cost chargeInfo-model result-model"},[a("v-uni-text",{staticClass:"chargeInfo-model-title"},[e._v("本月用电量")]),a("v-uni-view",{staticClass:"chargeInfo-model-info"},[a("v-uni-text",{staticClass:"model-info"},[e._v(e._s(e.renderData.usageEleMouth))]),e._v("度")],1)],1):e._e(),e.renderData.usageEleMouth>0?a("v-uni-view",{staticClass:"chargeInfo-cost chargeInfo-model result-model"},[a("v-uni-text",{staticClass:"chargeInfo-model-title"},[e._v("本月用电金额")]),a("v-uni-view",{staticClass:"chargeInfo-model-info"},[a("v-uni-text",{staticClass:"model-info"},[e._v(e._s(e.renderData.usageSumMouth))]),e._v("元")],1)],1):e._e()],1),a("v-uni-view",{staticClass:"list-box page-cont"},[a("v-uni-view",{staticClass:"page_top-box"},[e._l(e.deviceType,(function(t,i){return[0==i&&e.renderData.usageTotalColdWater>0?a("v-uni-view",{key:i+"_0",class:"tabbarItem top-box-distance "+(e.deviceIndex==i?"activeBar":""),attrs:{id:i},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),t.click.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"page_navbar-title "},[e._v(e._s(t.name))])],1):e._e(),1==i&&e.renderData.usageTotalHotWater>0?a("v-uni-view",{key:i+"_1",class:"tabbarItem top-box-distance "+(e.deviceIndex==i?"activeBar":""),attrs:{id:i},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),t.click.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"page_navbar-title "},[e._v(e._s(t.name))])],1):e._e(),2==i&&e.renderData.usageTotalEle>0?a("v-uni-view",{key:i+"_2",class:"tabbarItem top-box-distance "+(e.deviceIndex==i?"activeBar":""),attrs:{id:i},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),t.click.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"page_navbar-title "},[e._v(e._s(t.name))])],1):e._e()]}))],2),a("v-uni-view",{staticClass:"deviceEcharts"},[a("v-uni-view",{staticClass:"select"},[a("v-uni-picker",{attrs:{value:e.selectTimeInd,range:e.selectTime},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindPickerChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"picker"},[e._v(e._s(e.selectTime[e.selectTimeInd])),a("i",{staticClass:"btmArrow"})])],1)],1),a("v-uni-canvas",{staticClass:"canvas",attrs:{"canvas-id":"lineCanvas","disable-scroll":"true"},on:{touchstart:function(t){arguments[0]=t=e.$handleEvent(t),e.touchHandler.apply(void 0,arguments)},touchmove:function(t){arguments[0]=t=e.$handleEvent(t),e.moveHandler.apply(void 0,arguments)},touchend:function(t){arguments[0]=t=e.$handleEvent(t),e.touchEndHandler.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"result-specificInfo result-model"},[e.renderData.usageTotalEle>0?a("v-uni-view",{staticClass:"specificInfo-item"},[a("v-uni-text",{staticClass:"specificInfo-item-label"},[e._v("合计用电")]),a("v-uni-text",{staticClass:"specificInfo-item-value"},[e._v(e._s(e.renderData.usageTotalEle))]),a("v-uni-text",[e._v("度")])],1):e._e(),e.renderData.usageTotalColdWater>0?a("v-uni-view",{staticClass:"specificInfo-item"},[a("v-uni-text",{staticClass:"specificInfo-item-label"},[e._v("合计用冷水")]),a("v-uni-text",{staticClass:"specificInfo-item-value"},[e._v(e._s(e.renderData.usageTotalColdWater))]),a("v-uni-text",[e._v("立方")])],1):e._e(),e.renderData.usageTotalHotWater>0?a("v-uni-view",{staticClass:"specificInfo-item"},[a("v-uni-text",{staticClass:"specificInfo-item-label"},[e._v("合计用热水")]),a("v-uni-text",{staticClass:"specificInfo-item-value"},[e._v(e._s(e.renderData.usageTotalHotWater))]),a("v-uni-text",[e._v("立方")])],1):e._e()],1),a("v-uni-view",{staticClass:"list-box"},[a("v-uni-view",{staticClass:"title-box"},[e._v("异常记录")]),e.news.length>0?a("fee-lists",{attrs:{alarmNewsList:e.news,height:.43*e.windowHeight-10,listLength:e.listLength},on:{pull:function(t){arguments[0]=t=e.$handleEvent(t),e.bindPullUp.apply(void 0,arguments)}}}):e._e(),0==e.news.length?a("v-uni-view",[a("v-uni-text",{staticClass:"content-ending"},[e._v("列表内容为空")])],1):e._e()],1)],1)],1)},n=[]},"8b1f":function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-scroll-view",{style:"height: "+e.height+"px;",attrs:{"scroll-y":!0,"scroll-top":e.scrollTop,"lower-threshold":"1","upper-threshold":"10"},on:{scrolltolower:function(t){arguments[0]=t=e.$handleEvent(t),e.lower.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"errBox"},e._l(e.alarmNewsList,(function(t,i){return a("v-uni-view",{key:i,staticClass:"errList"},[a("v-uni-view",{staticClass:"noticeIncon"},[a("v-uni-image",{staticClass:"image-css",attrs:{src:"/static/pages/indexModule/resources/pic/errorNotice.png",width:"40",mode:"widthFix"}})],1),a("v-uni-view",{staticClass:"errInfo"},[a("v-uni-view",{staticClass:"errAdree"},[a("v-uni-text",[e._v(e._s(t.floorName))]),a("v-uni-text",[e._v(e._s("->"))]),a("v-uni-text",[e._v(e._s(t.roomname))]),a("v-uni-text",[e._v(e._s("->"))]),a("v-uni-text",[e._v(e._s(t.deviceType))])],1),a("v-uni-view",{staticClass:"errInfoTxt"},[a("v-uni-text",[e._v("预警描述：")]),a("v-uni-text",[e._v(e._s(t.errDesc))])],1),a("v-uni-view",{staticClass:"errInfoTxt"},[a("v-uni-text",[e._v("预警时间：")]),a("v-uni-text",[e._v(e._s(t.errTime))])],1)],1)],1)})),1)],1)],1)},n=[]},"9f31":function(e,t,a){"use strict";a.r(t);var i=a("87dd"),o=a("6e04");for(var n in o)"default"!==n&&function(e){a.d(t,e,(function(){return o[e]}))}(n);a("e4a3");var s,r=a("f0c5"),l=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"1ff879bf",null,!1,i["a"],s);t["default"]=l.exports},b3fe:function(e,t,a){"use strict";var i=a("7a7b"),o=a.n(i);o.a},c235:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".errBox[data-v-bb5284f8]{padding:0 %?30?%;box-sizing:border-box}.errList[data-v-bb5284f8]{display:-webkit-box;display:-webkit-flex;display:flex;font-size:%?30?%;margin-bottom:%?30?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.errAdree[data-v-bb5284f8]{font-weight:bolder}.errInfo[data-v-bb5284f8]{padding-left:%?30?%;box-sizing:border-box}.errInfoTxt[data-v-bb5284f8]{font-size:%?28?%;color:#999}.image-css[data-v-bb5284f8]{width:%?50?%;height:%?60?%;margin:0 %?30?% 0 %?30?%}",""]),e.exports=t},cfab:function(e,t,a){"use strict";a("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{scrollTop:0}},components:{},props:{alarmNewsList:{type:Array,default:function(){return[]}},height:{type:Number,default:100},listLength:{type:Number,default:1}},methods:{lower:function(){this.listLength!=this.alarmNewsList.length&&this.$emit("pull",{detail:{listLength:this.listLength}})}}};t.default=i},e4a3:function(e,t,a){"use strict";var i=a("59cb"),o=a.n(i);o.a}}]);