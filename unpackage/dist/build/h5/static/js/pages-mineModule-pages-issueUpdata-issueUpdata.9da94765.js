(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mineModule-pages-issueUpdata-issueUpdata"],{"0752":function(e,a,t){"use strict";t.r(a);var i=t("8deb"),s=t.n(i);for(var l in i)"default"!==l&&function(e){t.d(a,e,(function(){return i[e]}))}(l);a["default"]=s.a},"3e65":function(e,a,t){"use strict";t.r(a);var i=t("7419"),s=t("0752");for(var l in s)"default"!==l&&function(e){t.d(a,e,(function(){return s[e]}))}(l);t("7256");var n,o=t("f0c5"),c=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,"3d3d04ea",null,!1,i["a"],n);a["default"]=c.exports},"574c":function(e,a,t){var i=t("dd75");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=t("4f06").default;s("2c30782a",i,!0,{sourceMap:!1,shadowMode:!1})},7256:function(e,a,t){"use strict";var i=t("574c"),s=t.n(i);s.a},7419:function(e,a,t){"use strict";var i;t.d(a,"b",(function(){return s})),t.d(a,"c",(function(){return l})),t.d(a,"a",(function(){return i}));var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",{staticClass:"page "},[t("v-uni-view",{staticClass:"page__bd"},[t("v-uni-view",{staticClass:"weui-cells__title"},[e._v("问题描述（必填）200以内")]),t("v-uni-view",{staticClass:"weui-cells weui-cells_after-title"},[t("v-uni-view",{staticClass:"weui-cell"},[t("v-uni-view",{staticClass:"weui-cell__bd"},[t("v-uni-textarea",{staticClass:"weui-textarea",staticStyle:{height:"5.8em"},attrs:{placeholder:"请输入文本",maxlength:"140"},on:{input:function(a){arguments[0]=a=e.$handleEvent(a),e.getProblem.apply(void 0,arguments)}}})],1)],1)],1)],1),t("v-uni-view",{staticClass:"weui-cells"},[t("v-uni-view",{staticClass:"weui-cell"},[t("v-uni-view",{staticClass:"weui-cell__bd"},[t("v-uni-view",{staticClass:"weui-uploader"},[t("v-uni-view",{staticClass:"weui-uploader__hd"},[t("v-uni-view",{staticClass:"weui-uploader__title"},[e._v("拍照上传（选填）")])],1),t("v-uni-view",{staticClass:"weui-uploader__bd"},[t("v-uni-view",{staticClass:"weui-uploader__files",attrs:{id:"uploaderFiles"}},[e._l(e.files,(function(a,i){return[t("v-uni-view",{key:i+"_0",staticClass:"weui-uploader__file",attrs:{id:a},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.previewImage.apply(void 0,arguments)}}},[t("v-uni-image",{staticClass:"weui-uploader__img",attrs:{src:a,mode:"aspectFill"}})],1)]}))],2),t("v-uni-view",{staticClass:"camera"},[t("v-uni-image",{staticClass:"weui-uploader__img",attrs:{src:e.mineImageUrl.camera},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.chooseImage.apply(void 0,arguments)}}})],1)],1)],1)],1)],1)],1),t("v-uni-view",{staticClass:"page__bd"},[t("v-uni-view",{staticClass:"weui-cells__title"},[e._v("联系电话（选填）")]),t("v-uni-view",{staticClass:"weui-cells weui-cells_after-title"},[t("v-uni-view",{staticClass:"weui-cell weui-cell_input"},[t("v-uni-view",{staticClass:"weui-cell__hd"},[t("v-uni-view",{staticClass:"weui-label"},[e._v("电话号码")])],1),t("v-uni-view",{staticClass:"weui-cell__bd"},[t("v-uni-input",{staticClass:"weui-input input-group",attrs:{placeholder:"方便技术人员与你联系",maxlength:"11"},on:{blur:function(a){arguments[0]=a=e.$handleEvent(a),e.getPhone.apply(void 0,arguments)}}})],1)],1)],1)],1),t("v-uni-view",{staticClass:"page__bd page__bd_spacing"},[t("v-uni-button",{staticClass:"weui-btn page_submit",attrs:{type:"primary",disabled:e.disabled},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.submitIssue.apply(void 0,arguments)}}},[e._v("立即提交")])],1)],1)},l=[]},"8deb":function(e,a,t){"use strict";var i=t("4ea4");t("99af"),t("baa5"),t("4d63"),t("ac1f"),t("25f0"),t("5319"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=i(t("ade3")),l=getApp(),n=t("9be7"),o={data:function(){return{mineImageUrl:n,files:[],imageBase64:[],problemDetail:"",phone:"",disabled:!1}},components:{},props:{},methods:{chooseImage:function(e){var a,t=this;t.files.length<2?(a="android"==e.platform?["拍摄","从相册中选择","取消"]:["拍摄","从相册中选择"],wx.showActionSheet({itemList:a,success:function(e){"0"==e.tapIndex?t.takeCamera():"1"==e.tapIndex&&t.takePhoto()}})):l.globalData.ShowMsgUtil.showErrorModal("只能传两张！","超过上传图片的个数")},takeCamera:function(e){var a=this;wx.chooseImage({count:1,sizeType:["compressed"],sourceType:["camera"],success:function(e){var t=e.tempFilePaths[0];console.log(e);var i=e.tempFiles[0].name.substring(e.tempFiles[0].name.lastIndexOf(".")+1);"jpg"==i||"png"==i?(a.chageBase64(t),a.setData({files:a.files.concat(e.tempFilePaths)})):l.globalData.ShowMsgUtil.showErrorModal("上传失败","上传图片只能是 jpg、png格式!")},fail:function(e){l.globalData.ShowMsgUtil.showNoneToastByFail()}})},takePhoto:function(e){var a=this;wx.chooseImage({count:1,sizeType:["compressed"],sourceType:["album"],success:function(e){console.log(e);var t=e.tempFilePaths[0],i=e.tempFiles[0].name.substring(e.tempFiles[0].name.lastIndexOf(".")+1);"jpg"==i||"png"==i?(a.chageBase64(t),a.setData({files:a.files.concat(e.tempFilePaths)})):l.globalData.ShowMsgUtil.showErrorModal("上传失败","上传图片只能是 jpg、png格式!")},fail:function(e){l.globalData.ShowMsgUtil.showNoneToastByFail()}})},previewImage:function(e){wx.previewImage({current:e.currentTarget.id,urls:this.files})},getProblem:function(e){var a=this;a.setData({problemDetail:e.detail.value})},getPhone:function(e){var a=this;a.setData({phone:e.detail.value})},chageBase64:function(e){var a=this,t="",i=l.globalData.base64Util.pathToBase64;i(e).then((function(e){t=e;var i=new RegExp("data:image/png;base64,","g"),l=new RegExp("data:image/jpeg;base64,","g"),n=t.replace(i,""),o=n.replace(l,""),c=a.imageBase64.length;a.setData((0,s.default)({},"imageBase64["+c+"]",o))})).catch((function(e){console.error(e)}))},submitIssue:function(e){this.setData({disabled:!0});var a=l.globalData.StorageUtil.get("userInfoCach");l.globalData.ShowMsgUtil.netErrNotice();var t=this;return t.problemDetail?t.phone&&!/^1[34578]\d{9}$/.test(t.phone)?(l.globalData.ShowMsgUtil.showErrorModal("请重新填写","手机号码格式不确定！"),void this.setData({disabled:!1})):(this.setData({disabled:!0}),l.globalData.ShowMsgUtil.showLoadToast("正在申请..."),void wx.request({url:l.globalData.RequestUrl.baseRequestUrl.feedback,data:{question:t.problemDetail,telephone:t.phone,imgUrl:t.imageBase64},header:{token:a.token,"content-type":"application/json"},method:"POST",success:function(e){wx.hideToast(),console.log("意见反馈返回",e.data),e.data&&200==e.data.code||(this.setData({disabled:!1}),l.globalData.ShowMsgUtil.showErrorModal("请稍后再试！","反馈提交失败！"))},fail:function(e){wx.hideToast(),this.setData({disabled:!1}),l.globalData.ShowMsgUtil.showNoneToastByFail()}})):(l.globalData.ShowMsgUtil.showErrorModal("请填写完整","问题描述不能为空！"),void this.setData({disabled:!1}))}}};a.default=o},"9be7":function(e,a){var t="/static/pages/mineModule/resources/pic",i={image:t,enter:"".concat(t,"/enter.png"),lanshan:"".concat(t,"/lanshan.png"),logo:"".concat(t,"/logo.png"),camera:"".concat(t,"/camera.png"),branch:"".concat(t,"/branch.png"),faceImg:"".concat(t,"/faceImg.png"),xcImg:"".concat(t,"/xcImg.png"),compareImg:"".concat(t,"/compare.png"),bgColorImg:"".concat(t,"/bgColor.png")};e.exports=i},dd75:function(e,a,t){var i=t("24fb");a=i(!1),a.push([e.i,'.input-group uni-picker.placeholder[data-v-3d3d04ea]{color:#ccc}uni-button[type="primary"][data-v-3d3d04ea]{background-color:#20a4f7}',""]),e.exports=a}}]);