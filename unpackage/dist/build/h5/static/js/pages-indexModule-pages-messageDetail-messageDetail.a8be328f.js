(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-indexModule-pages-messageDetail-messageDetail"],{"0b92":function(a,e,t){var l=t("24fb");e=l(!1),e.push([a.i,'.record-list[data-v-2e4b2890]{margin:2% 2% 0 2%;\r\n  /* height: 260px; */background-color:#fff;bottom:0;padding:15px 20px;position:relative}.wx-image[data-v-2e4b2890]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;margin:0 10px}.list-box-c[data-v-2e4b2890]{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.button-sp-area[data-v-2e4b2890]{margin:0 auto;padding-top:25px;width:70%}uni-button[type="primary"][data-v-2e4b2890]{background-color:#20a4f7}\r\n/*button[disabled] {\r\n  background: #5bc0de !important;\r\n} */.gotomeet[data-v-2e4b2890]{position:absolute;bottom:%?10?%;right:%?20?%;font-size:%?24?%;color:#20a4f7}.uni-scroll-view img[data-v-2e4b2890],uni-image[data-v-2e4b2890]{max-width:100%}',""]),a.exports=e},3820:function(a,e,t){"use strict";t("ac1f"),t("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=getApp(),i={data:function(){return{statc:"",windowHeight:0,windowWidth:0,pageData:{showObj:{messageTitle:"",messageSendTime:"",messageTypeName:"",messageContent:"",wxMessagePageValue:null,imageList:[]},btnObj:{confirmIsShow:!1,dealIsShow:!1}},disabled:!0,extras:""}},onLoad:function(a){console.log(a);var e=a.mid;if(""==e||null==e||"undefined"==e)return l.globalData.ShowMsgUtil.showErrorModal("显示失败","详情显示失败！"),void setTimeout((function(){wx.hideToast(),wx.navigateBack({delta:1})}),200);console.log("mid",e),this.getMsgDetail(e)},onShow:function(){},methods:{getMsgDetail:function(a){console.log(a);var e=this;l.globalData.ShowMsgUtil.netErrNotice();var t=l.globalData.StorageUtil.get("userInfoCach");wx.request({url:l.globalData.RequestUrl.appoprRequestUrl.getMsgDetail+"/"+a,method:"GET",header:{token:t.token},success:function(a){if(console.log("获取消息详情",a.data),a.data&&200==a.data.code){if(""!==a.data.rows.extras){console.log(JSON.parse(a.data.rows.extras));var t=JSON.parse(a.data.rows.extras);console.log(t),e.setData({extras:t})}6==a.data.rows.wxMessagePageValue.childMsgType&&e.setData({statc:2}),a.data.rows.messageRead,e.dealShowNewDetail(a.data.rows)}else l.globalData.ShowMsgUtil.showErrorModal("请求失败",a.data.msg,a.data.code)},fail:function(){l.globalData.ShowMsgUtil.showNoneToastByFail()}})},goToMeet:function(a){console.log(a),console.log(this.extras);var e=this.extras,t=l.globalData.StorageUtil.get("userInfoCach"),i=a.msg;i&&(l.globalData.ShowMsgUtil.showLoadToast("正在跳转",500),1==i.msgType?1==i.childMsgType||2==i.childMsgType||3==i.childMsgType||4==i.childMsgType?l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.appointmentPageUrl.attendPianoDetailUrl+"?meetingId="+i.id+"&type=2",500):(6==i.childMsgType||5==i.childMsgType)&&l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.appointmentPageUrl.attendPianoDetailUrl+"?meetingId="+i.id+"&type=2&conflict=1",500):2==i.msgType?1==i.childMsgType?l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.appointmentPageUrl.attendMeetingDetailUrl+"?meetingId="+i.id,500):2==i.childMsgType?l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.indexPageUrl.approvalInfoUrl,500):3==i.childMsgType?l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.appointmentPageUrl.meetingDetailUrl+"?meetingId="+i.id,500):4==i.childMsgType?l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.indexPageUrl.approvalInfoUrl,500):5==i.childMsgType?l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.appointmentPageUrl.attendMeetingDetailUrl+"?meetingId="+i.id,500):6==i.childMsgType?wx.hideToast():7==i.childMsgType&&l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.appointmentPageUrl.attendMeetingDetailUrl+"?meetingId="+i.id,500):3==i.msgType?1==i.childMsgType?l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.attendancePageUrl.studentClockUrl+"?planId="+i.id+"&executePlanId="+i.executePlanId,500):2==i.childMsgType?l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.indexPageUrl.approvalInfoUrl,500):3==i.childMsgType&&l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.attendancePageUrl.studentStatisticsUrl+"?planId="+i.id,500):4==i.msgType?5==t.role?(console.log(11111111),l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.repairPageUrl.repairDetailOfMaintainUrl+"?repairCode="+e.repairCode,500)):l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.repairPageUrl.studentRepairDetailUrl+"?repairCode="+e.repairCode,500):5==i.msgType&&(1==i.childMsgType||2==i.childMsgType||3==i.childMsgType||4==i.childMsgType?l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.appointmentPageUrl.attendPianoDetailUrl+"?meetingId="+i.id+"&type=3",500):5==i.childMsgType?l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.appointmentPageUrl.attendPianoDetailUrl+"?meetingId="+i.id+"&type=3&conflict=1",500):6==i.childMsgType?l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.indexPageUrl.approvalInfoUrl,500):(7==i.childMsgType||8==i.childMsgType)&&l.globalData.PublicUtil.navigateByUrl(l.globalData.PageUrl.appointmentPageUrl.attendPianoDetailUrl+"?meetingId="+i.id+"&type=3",500)))},dealShowNewDetail:function(a){if(""===a||null==a)return this.pageData=[],void this.setData({pageData:this.pageData});var e={};e.mid=a.id,e.messageTitle=""==a.messageTitle?"无":a.messageTitle,e.messageContent=a.messageContent,e.messageSendTime=a.messageSendTime,e.wxMessagePageValue=0==a.wxMessagePageValue.msgType?null:a.wxMessagePageValue,""!=a.extras&&(null!=JSON.parse(a.extras).department&&(e.messageTypeName=JSON.parse(a.extras).department[0]),null!=JSON.parse(a.extras).images&&(e.imageList=JSON.parse(a.extras).images)),e.messageContent=e.messageContent.replace(/<img/g,"<img style='max-width:100%;height:auto;'");var t=this.dealBtnObj(a);this.pageData.btnObj=t,this.pageData.showObj=e,this.setData({pageData:this.pageData})},dealBtnObj:function(a){var e={};return e.dealIsShow=0!=a.messageNeedDispose,e.confirmIsShow=0!=a.messageNeedAffirm,1==a.messageNeedAffirm?0==a.messageAffirm?(e.confirmName="点击确认",e.confirmDisabled=!1,e.dealIsShow=!1,e.dealName="等待确认",e.dealDisabled=!0):(e.confirmName="已确认",e.confirmDisabled=!0,0==a.messageNeedDispose?(e.dealName="无需处理",e.dealDisabled=!0):0==a.messageDispose?(e.dealName="点击处理",e.dealDisabled=!1):(e.dealName="已处理",e.dealDisabled=!0)):(e.confirmName="无需确认",e.confirmDisabled=!0,0==a.messageNeedDispose?(e.dealName="无需处理",e.dealDisabled=!0):0==a.messageDispose?(e.dealName="点击处理",e.dealDisabled=!1):(e.dealName="点击处理",e.dealDisabled=!0)),e},markRead:function(a){l.globalData.ShowMsgUtil.netErrNotice();var e=l.globalData.StorageUtil.get("userInfoCach");wx.request({url:l.globalData.RequestUrl.appoprRequestUrl.markRead,data:{mid:a},header:{token:e.token},method:"POST",success:function(a){console.log("将消息设为已读",a.data),a.data&&200==a.data.code||l.globalData.ShowMsgUtil.showErrorModal("请求失败",a.data.msg,a.data.code)},fail:function(){l.globalData.ShowMsgUtil.showNoneToast("后台连接失败",2e3)}})},confirmMsg:function(){if(!this.pageData.btnObj.confirmDisabled){l.globalData.ShowMsgUtil.netErrNotice();var a=this.pageData.showObj.mid,e=l.globalData.StorageUtil.get("userInfoCach");wx.request({url:l.globalData.RequestUrl.appoprRequestUrl.confirmedMsg+"/"+a,method:"GET",header:{token:e.token},success:function(a){console.log("确认消息",a.data),a.data&&200==a.data.code||l.globalData.ShowMsgUtil.showErrorModal("1111",a.data.msg,a.data.code)},fail:function(){l.globalData.ShowMsgUtil.showNoneToastByFail()}})}},dealMsg:function(){if(!this.pageData.btnObj.dealDisabled){l.globalData.ShowMsgUtil.netErrNotice();var a=this.pageData.showObj.mid,e=l.globalData.StorageUtil.get("userInfoCach");wx.request({url:l.globalData.RequestUrl.appoprRequestUrl.handledMsg+"/"+a,method:"GET",header:{token:e.token},success:function(a){console.log("处理消息",a.data),a.data&&200==a.data.code||l.globalData.ShowMsgUtil.showErrorModal("请求失败",a.data.msg,a.data.code)},fail:function(){l.globalData.ShowMsgUtil.showNoneToastByFail()}})}}}};e.default=i},"4e5b":function(a,e,t){"use strict";t.r(e);var l=t("ce67"),i=t("720f");for(var s in i)"default"!==s&&function(a){t.d(e,a,(function(){return i[a]}))}(s);t("d6ea");var o,n=t("f0c5"),g=Object(n["a"])(i["default"],l["b"],l["c"],!1,null,"2e4b2890",null,!1,l["a"],o);e["default"]=g.exports},"720f":function(a,e,t){"use strict";t.r(e);var l=t("3820"),i=t.n(l);for(var s in l)"default"!==s&&function(a){t.d(e,a,(function(){return l[a]}))}(s);e["default"]=i.a},c0ee:function(a,e,t){var l=t("0b92");"string"===typeof l&&(l=[[a.i,l,""]]),l.locals&&(a.exports=l.locals);var i=t("4f06").default;i("aca2b184",l,!0,{sourceMap:!1,shadowMode:!1})},ce67:function(a,e,t){"use strict";var l;t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return s})),t.d(e,"a",(function(){return l}));var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-uni-view",{staticClass:"page"},[t("v-uni-view",{staticClass:"page__bd "},[t("v-uni-view",{staticClass:"weui-cells weui-cells_after-title record-list"},[t("v-uni-view",{staticClass:"weui-cell__bd",staticStyle:{"font-size":"22px"}},[a._v(a._s(a.pageData.showObj.messageTitle))]),t("v-uni-view",{staticClass:"list-box-c",staticStyle:{"margin-top":"12px",color:"#888888","font-size":"12px"}},[t("v-uni-view",{staticClass:"weui-cell__bd"},[t("v-uni-text",[a._v(a._s(a.pageData.showObj.messageSendTime))])],1),t("v-uni-view",{staticClass:"weui-cell__ft",staticStyle:{color:"#576b95"}},[a._v(a._s(a.pageData.showObj.messageTypeName))])],1),t("v-uni-view",{staticClass:"weui-cell__bd",staticStyle:{"font-size":"14px","margin-top":"20px"}},[t("v-uni-scroll-view",{staticStyle:{width:"100%",height:"calc(100vh-100rpx)"},attrs:{"scroll-y":!0}},[t("v-uni-view",{domProps:{innerHTML:a._s(a.pageData.showObj.messageContent)}},[a._v(a._s(a.pageData.showObj.messageContent))])],1)],1),null!=a.pageData.showObj.wxMessagePageValue?t("v-uni-view",{staticClass:"gotomeet",on:{click:function(e){arguments[0]=e=a.$handleEvent(e),a.goToMeet({msg:a.pageData.showObj.wxMessagePageValue})}}},[a._v("前往 "+a._s(">>"))]):a._e()],1),a.pageData.btnObj.confirmIsShow||a.pageData.btnObj.dealIsShow?t("v-uni-view",{staticClass:"button-sp-area"},[a.pageData.btnObj.confirmIsShow?t("v-uni-button",{staticClass:"weui-btn",attrs:{type:"primary",disabled:a.pageData.btnObj.confirmDisabled},on:{click:function(e){arguments[0]=e=a.$handleEvent(e),a.confirmMsg.apply(void 0,arguments)}}},[a._v(a._s(a.pageData.btnObj.confirmName))]):a._e(),a.pageData.btnObj.dealIsShow?t("v-uni-button",{staticClass:"weui-btn",attrs:{type:"primary",disabled:a.pageData.btnObj.dealDisabled},on:{click:function(e){arguments[0]=e=a.$handleEvent(e),a.dealMsg.apply(void 0,arguments)}}},[a._v(a._s(a.pageData.btnObj.dealName))]):a._e()],1):a._e()],1)],1)},s=[]},d6ea:function(a,e,t){"use strict";var l=t("c0ee"),i=t.n(l);i.a}}]);