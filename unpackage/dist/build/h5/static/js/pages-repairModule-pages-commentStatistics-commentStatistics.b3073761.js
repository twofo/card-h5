(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-repairModule-pages-commentStatistics-commentStatistics"],{"0e21":function(e,t,a){"use strict";a.r(t);var i=a("f2e8"),n=a("c7a0");for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);a("a6e9");var c,s=a("f0c5"),o=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"4d793ac4",null,!1,i["a"],c);t["default"]=o.exports},"6337b":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".myui-header[data-v-4d793ac4]{width:100%;height:%?320?%;background:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.myui-header__left[data-v-4d793ac4]{width:35%;height:90%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.header__left-circle[data-v-4d793ac4]{width:%?150?%;height:%?150?%;border-radius:%?75?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;background-color:#20a4f7;color:#fff}.myui-header__right[data-v-4d793ac4]{width:75%;height:90%}\r\n/* 统计图 */uni-progress[data-v-4d793ac4]{width:90%}.progress-box[data-v-4d793ac4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:%?50?%;margin-bottom:%?6?%}.page-section-gap[data-v-4d793ac4]{padding:0 %?0?% 0 %?30?%}.progress-items[data-v-4d793ac4]{width:%?350?%;height:%?20?%;margin-left:%?15?%}\r\n/* 评论列表 */.weui-cells__box[data-v-4d793ac4]{background:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;color:#999;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin:%?10?% %?0?% %?20?%}.myui-cells[data-v-4d793ac4]{position:relative;margin-top:.57647059em;background-color:#fff;line-height:1.41176471;font-size:16px;margin-top:19px}.myui-cell__ft[data-v-4d793ac4]{padding-top:13px;font-size:14px;color:#999;margin-left:5px}.myui-cell__bd[data-v-4d793ac4]{height:%?100?%}.myui-cell[data-v-4d793ac4]{padding:10px 0;position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.myui-cell__msg[data-v-4d793ac4]{font-size:14px;margin-top:-16px}\r\n/* 五星 */.myui-center[data-v-4d793ac4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;float:right;margin-right:101px}.star[data-v-4d793ac4]{width:%?35?%;height:%?35?%;margin-left:%?8?%}.cell__text[data-v-4d793ac4]{width:100%;height:%?30?%;padding-top:10px}",""]),e.exports=t},8496:function(e,t,a){"use strict";a("b680"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=getApp(),n=a("c2d6"),r={data:function(){return{list:[],percentList:[{name:"五星",percent:0},{name:"四星",percent:0},{name:"三星",percent:0},{name:"二星",percent:0},{name:"一星",percent:0}],avager:0,totalNumber:""}},components:{},props:{},onLoad:function(e){console.log("------------------------评论统计------------------------"),this.getCommentList(10,0),this.getCommentStatistics()},methods:{getCommentList:function(e,t){var a=this;i.globalData.ShowMsgUtil.netErrNotice();var n=i.globalData.StorageUtil.get("userInfoCach");wx.request({url:i.globalData.RequestUrl.repairRequestUrl.getCommentStatistics+"?take="+e+"&skip="+t,method:"GET",header:{token:n.token},success:function(e){if(console.log("获取评论列表返回",e.data),e.data&&200==e.data.code){var t=a.dealLists(e.data.rows);a.setData({list:t})}else i.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code)},fail:function(){i.globalData.ShowMsgUtil.showNoneToastByFail()}})},dealLists:function(e){for(var t=0;t<e.length;t++){for(var a=[{classname:n.starOff,value:1,checked:!1},{classname:n.starOff,value:2,checked:!1},{classname:n.starOff,value:3,checked:!1},{classname:n.starOff,value:4,checked:!1},{classname:n.starOff,value:5,checked:!1}],i=0;i<e[t].commentRanks;i++)a[i].checked=!0,a[i].classname=n.starOn;1==e[t].hidden?e[t].commentName="匿名":e[t].commentName=e[t].commentName.substring(0,5),e[t].createdTime=e[t].createdTime,e[t].starts=a}return e},getCommentStatistics:function(){var e=this;i.globalData.ShowMsgUtil.netErrNotice();var t=i.globalData.StorageUtil.get("userInfoCach");wx.request({url:i.globalData.RequestUrl.repairRequestUrl.selectStatisticsOfComment,method:"GET",header:{token:t.token},success:function(t){if(console.log("获取评论统计返回",t.data),t.data&&200==t.data.code){var a=t.data.rows;e.dealStatistics(a)}else i.globalData.ShowMsgUtil.showErrorModal("请求失败",t.data.msg,t.data.code)},fail:function(){i.globalData.ShowMsgUtil.showNoneToastByFail()}})},dealStatistics:function(e){var t=this.percentList,a=e.oneStartNumber+e.twoStartNumber+e.threeStartNumber+e.fourStartNumber+e.fiveStartNumber;t[4].percent=0==a?0:(e.oneStartNumber/a*100).toFixed(1),t[3].percent=0==a?0:(e.twoStartNumber/a*100).toFixed(1),t[2].percent=0==a?0:(e.threeStartNumber/a*100).toFixed(1),t[1].percent=0==a?0:(e.fourStartNumber/a*100).toFixed(1),t[0].percent=0==a?0:(e.fiveStartNumber/a*100).toFixed(1);var i=0;0!=a&&(i=((1*e.oneStartNumber+2*e.twoStartNumber+3*e.threeStartNumber+4*e.fourStartNumber+5*e.fiveStartNumber)/a).toFixed(1)),this.setData({percentList:t,totalNumber:a,avager:i})}}};t.default=r},a6e9:function(e,t,a){"use strict";var i=a("c9e7"),n=a.n(i);n.a},c2d6:function(e,t){var a="/static/pages/repairModule/resources/pic",i={image:a,repairApplyPic:"".concat(a,"/repair_apply.png"),myRepairPic:"".concat(a,"/repair_my.png"),starOn:"".concat(a,"/star_on.png"),starOff:"".concat(a,"/star_off.png"),icCall:"".concat(a,"/ic_call.png"),icProcessBlue:"".concat(a,"/ic_process_blue.png"),icProcessGray:"".concat(a,"/ic_process_gray.png"),navHomePage:"".concat(a,"/nav_home_page.png"),navHomePagePressed:"".concat(a,"/nav_home_page_pressed.png"),navMine:"".concat(a,"/nav_mine.png"),navMinePressed:"".concat(a,"/nav_mine_pressed.png"),navWorkerOrder:"".concat(a,"/nav_worker_order.png"),navWorkerOrderPressed:"".concat(a,"/nav_worker_order_pressed.png"),navNew:"".concat(a,"/nav_new.png"),navNewPressed:"".concat(a,"/nav_new_pressed.png"),bgRepairHeader:"".concat(a,"/bg_repair_header.png"),mineFunRecord:"".concat(a,"/mine_fun_record.png"),icStars:"".concat(a,"/ic_stars.png"),icTypeOther:"".concat(a,"/ic_type_other.png"),icRepairLock:"".concat(a,"/ic_repair_lock.png"),icRepairAmmeter:"".concat(a,"/ic_repair_ammeter.png"),icRepairWatermeter:"".concat(a,"/ic_repair_watermeter.png"),icRepairLamp:"".concat(a,"/ic_repair_lamp.png"),icClose:"".concat(a,"/close.png")};e.exports=i},c7a0:function(e,t,a){"use strict";a.r(t);var i=a("8496"),n=a.n(i);for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t["default"]=n.a},c9e7:function(e,t,a){var i=a("6337b");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("cb56483c",i,!0,{sourceMap:!1,shadowMode:!1})},f2e8:function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page"},[a("v-uni-view",{staticClass:"page__bd",staticStyle:{padding:"20rpx 30rpx"}},[a("v-uni-view",{staticClass:"myui-header",staticStyle:{"font-size":"14px"}},[a("v-uni-view",{staticClass:"myui-header__left"},[a("v-uni-view",{staticClass:"header__left-circle"},[a("v-uni-view",{staticStyle:{"font-size":"17px"}},[a("v-uni-text",{staticStyle:{"font-size":"25px","font-weight":"500"}},[e._v(e._s(e.avager))]),e._v("分")],1)],1),a("v-uni-text",{staticStyle:{"margin-top":"20rpx"}},[e._v(e._s(e.totalNumber)+"条评论")])],1),a("v-uni-view",{staticClass:"myui-header__right"},e._l(e.percentList,(function(t,i){return a("v-uni-view",{key:i},[a("v-uni-view",{staticClass:" page-section-gap",staticStyle:{"font-size":"17px"}},[a("v-uni-view",{staticClass:"progress-box"},[a("v-uni-text",[e._v(e._s(t.name))]),a("v-uni-view",{staticClass:"progress-items"},[a("v-uni-progress",{attrs:{percent:t.percent,color:"#20a4f7","show-info":!0,active:!0,"stroke-width":"6"}})],1)],1)],1)],1)})),1)],1),a("v-uni-view",{staticStyle:{"margin-top":"30rpx"}},[e._v("全部评论")]),a("v-uni-scroll-view",{staticClass:"myui-lists",staticStyle:{height:"750rpx"},attrs:{"scroll-y":!0,"lower-threshold":"1","upper-threshold":"10"}},[0==e.list.length?[a("v-uni-view",{staticClass:"weui-cells__box",staticStyle:{height:"500rpx"}},[e._v("暂无数据")])]:e._l(e.list,(function(t,i){return a("v-uni-view",{key:i,staticClass:"myui-cells"},[a("v-uni-view",{staticClass:"myui-cell",staticStyle:{"margin-left":"5px"}},[a("v-uni-view",{staticClass:"weui-cell__hd"},[e._v(e._s(t.commentName))]),a("v-uni-view",{staticClass:"weui-cell__bd"},[a("v-uni-view",{staticClass:"myui-center",staticStyle:{"margin-top":"-8rpx"}},e._l(t.starts,(function(e,t){return a("v-uni-label",{key:t},[a("v-uni-radio",{staticClass:"weui-check",attrs:{checked:e.checked}}),a("v-uni-view",{staticClass:"iconfont"},[a("v-uni-image",{staticClass:"star",attrs:{src:e.classname}})],1)],1)})),1)],1)],1),a("v-uni-view",{staticClass:"myui-cell__msg"},[a("v-uni-view",{staticClass:"cell__text"},[a("v-uni-view",{staticStyle:{width:"100%",height:"2.9em","margin-left":"5px"}},[e._v(e._s(t.commentDesc))])],1)],1),a("v-uni-view",{staticClass:"myui-cell__ft"},[e._v(e._s(t.createdTime))])],1)}))],2)],1)],1)},r=[]}}]);