(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-appointmentModule-pages-creatorMeetingDetail-meetingDetail"],{4973:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page"},[a("v-uni-view",{staticClass:"page__bd",staticStyle:{margin:"15rpx 10rpx"}},[a("meeting-detail",{attrs:{pageObj:e.pageObj,conflict:e.conflict},on:{myEventLeft:function(t){arguments[0]=t=e.$handleEvent(t),e.leftBtnTap.apply(void 0,arguments)},myEventRight:function(t){arguments[0]=t=e.$handleEvent(t),e.rigthBtnTap.apply(void 0,arguments)}}})],1)],1)},o=[]},9449:function(e,t,a){"use strict";var n=a("4ea4");a("ac1f"),a("5319"),a("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("bc30")),o=getApp(),m=a("3350"),l={data:function(){return{pageObj:{},timeObj:{},imageObj:m,meetingType:["内部会议","开放式会议"],conflict:0}},components:{meetingDetail:i.default},onLoad:function(e){console.log("会议详情",e),this.getAppointmentConfigure(),this.getMeetingDetail(e.meetingId),e.conflict&&(this.setData({conflict:e.conflict}),uni.setNavigationBarTitle({title:"待办_冲突列表_会议详情"}))},onUnload:function(){wx.hideToast()},methods:{getAppointmentConfigure:function(e){var t=this;o.globalData.ShowMsgUtil.netErrNotice();var a=o.globalData.StorageUtil.get("userInfoCach");wx.request({url:o.globalData.RequestUrl.appointmentRequestUrl.getAppointmentConfigure+"?areaType=1",method:"GET",header:{token:a.token},success:function(e){if(console.log('获取预约，所需的配置信息"',e.data),e.data&&200==e.data.code){var a=e.data.rows;t.contralTime(a.configureDtos)}else o.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code)},fail:function(){o.globalData.ShowMsgUtil.showNoneToastByFail()}})},contralTime:function(e){if(e){var t={};t.appointmentAdvanceTime=null==e.appointmentAdvanceTime?0:e.appointmentAdvanceTime,t.cancelAdvanceTimes=null==e.cancelAdvanceTime?0:e.cancelAdvanceTime,t.msgAdvanceTime=null==e.msgAdvanceTime?0:e.msgAdvanceTime,this.setData({timeObj:t})}},getMeetingDetail:function(e){o.globalData.ShowMsgUtil.showLoadAndMsgToast();var t=this;o.globalData.ShowMsgUtil.netErrNotice();var a=o.globalData.StorageUtil.get("userInfoCach");wx.request({url:o.globalData.RequestUrl.appointmentRequestUrl.meetingDetail+"?meetingId="+e,method:"GET",header:{token:a.token},success:function(e){console.log("获取会议详情返回",e.data),e.data&&200==e.data.code?t.dealPageObj(e.data.rows):o.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code)},fail:function(){o.globalData.ShowMsgUtil.showNoneToastByFail()},complete:function(){wx.hideToast({})}})},dealPageObj:function(e){this.meetingType,e.meetingType;var t={};t.meetingId=e.meetingId,t.meetingSubject=e.meetingSubject,t.meetingRoomName=e.meetingRoomName,t.meetingType=e.meetingType,t.meetingStartTime=o.globalData.PublicUtil.formatTimeTwo(e.meetingStartTime,"Y-M-D h:m")+"-"+o.globalData.PublicUtil.formatTimeTwo(e.meetingEndTime,"h:m");var a=e.meetingStartTime+":00",n=(o.globalData.PublicUtil.formatTimeTwo(e.meetingStartTime,"Y-M-D h:m"),o.globalData.SystemInfo.platform);if("ios"==n){var i=e.meetingEndTime.replace(/-/g,"-").split(" ");t.meetingStartTime=e.meetingStartTime.replace(/-/g,"-")+"-"+i[1];a=e.meetingStartTime.replace(/-/g,"/")+":00",e.meetingStartTime.replace(/-/g,"-")}t.meetingInitiator=e.meetingInitiator,t.meetingEmcee=e.meetingEmcee,t.meetingRecorder=e.meetingRecorder,t.meetingContent=e.meetingContent,t.createTime=e.createTime,t.meetingStatus=e.meetingStatus,t.adress=e.meetingRoomAddress,t.checkTime=this.checkFn(a,e.meetingInitiatorId,e.attenceBeforeTimeNumber,e.attenceAfterTimeNumber);var l=e.meetingStatus;if(-1==l)t.statusName="审核不通过",t.statusImage=m.unapprovePic,t.btn=[{name:"删除会议",bindtap:"deleteMeeting"},{name:"重新发起",bindtap:"createMeeting"}];else if(0==l)t.statusName="待审核",t.statusImage=m.checkPendingPic,t.btn=[{name:"取消会议",bindtap:"cancelMeeting"},{name:"编辑会议",bindtap:"editMeeting"}];else if(1==l)t.statusName="未开始",t.statusImage=m.nostartPic,t.btn=[{name:"取消会议",bindtap:"cancelMeeting"},{name:"开始签到",bindtap:"signIn"}];else if(2==l){t.statusName="进行中",t.statusImage=m.readyStartingPic,t.btn=[{name:"取消会议",bindtap:"cancelMeeting"},{name:"开始签到",bindtap:"signIn"}],t.showEditBtn=!0;var g=new Date(a).getTime(),c=(new Date).getTime();console.log(g,c),console.log(c<=g),c>=g&&(t.showEditBtn=!1,t.btn=[{name:"开始签到",bindtap:"signIn"}])}else-2==l?(t.statusName="已过期",t.statusImage=m.meetingOutPic):(t.statusName="审核通过",t.statusImage=m.approvePic,3==l?(t.statusName="已结束",t.btn=[{name:"删除会议",bindtap:"deleteMeeting"},{name:"查看统计",bindtap:"viewStatistics"}]):(console.log("未完成的会议---------------"),t.btn=[{name:"取消会议",bindtap:"cancelMeeting"},{name:"开始签到",bindtap:"signIn"}]));t.meetingAttendee="";for(var s=0;s<e.meetingAttendee.length;s++)s==e.meetingAttendee.length-1?t.meetingAttendee=t.meetingAttendee+e.meetingAttendee[s].userName:t.meetingAttendee=t.meetingAttendee+e.meetingAttendee[s].userName+"、";console.log("页面数据-",t),this.setData({pageObj:t})},checkFn:function(e,t,a,n){var i=new Date(e),m=i.getTime(i),l=m-6e4*a,g=m+6e4*n,c=o.globalData.PublicUtil.formatTimeTwo(l,"Y-M-D h:m")+" - "+o.globalData.PublicUtil.formatTimeTwo(g,"h:m");return c}}};t.default=l},e467:function(e,t,a){"use strict";a.r(t);var n=a("9449"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},fc86:function(e,t,a){"use strict";a.r(t);var n=a("4973"),i=a("e467");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);var m,l=a("f0c5"),g=Object(l["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],m);t["default"]=g.exports}}]);