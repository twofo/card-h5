(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-indexModule-pages-payRollCode-payRollCode"],{"01a3":function(t,e,i){"use strict";var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("ade3")),o=(getApp(),i("b6f8")),s=o.barcode,c=o.qrcode,r={data:function(){var t;return t={inputMoney:"",expireAtTime:"",authCode:"",barcodeImgUrl:"",qrcodeImgUrl:"",display:"none",canvasHidden:!0,screenWidth:"",screenHeight:450},(0,n.default)(t,"display",""),(0,n.default)(t,"barcodeImgUrl",""),(0,n.default)(t,"qrcodeImgUrl",""),(0,n.default)(t,"shareImgSrc",""),t},components:{},props:{},onLoad:function(t){this.setData({inputMoney:t.inputMoney,expireAtTime:t.expireAtTime,authCode:t.authCode}),this.getScrennInfo(),console.log(this.screenHeight-230),c("qrcode",this.authCode,350,350),s("barcode",this.authCode,740,180)},onShow:function(){},methods:{getScrennInfo:function(){var t=this;wx.getSystemInfo({success:function(e){t.setData({screenWidth:e.screenWidth,screenHeight:e.screenHeight})}})},drawText:function(t,e,i,a,n,o){for(var s=0,c=0,r=0;r<e.length;r++)s+=t.measureText(e[r]).width,s>o&&(t.fillText(e.substring(c,r),i,a),a+=16,s=0,c=r,n+=30),r==e.length-1&&t.fillText(e.substring(c,r+1),i,a);return n+=10,n},onShareTap:function(t){wx.showLoading({title:"生成中"}),this.setData({display:"block"}),this.barcodeToImgUrl()},barcodeToImgUrl:function(){var t=this;wx.canvasToTempFilePath({x:0,y:0,width:350,height:100,destWidth:740,destHeight:140,canvasId:"barcode",success:function(e){t.setData({barcodeImgUrl:e.tempFilePath}),e.tempFilePath||wx.showModal({title:"提示",content:"图片绘制中，请稍后重试",showCancel:!1}),t.qrcodeToImgUrl()},fail:function(t){wx.showModal({title:"提示",content:"图片绘制出错, 请稍后再试！",showCancel:!1})}})},qrcodeToImgUrl:function(){var t=this;wx.canvasToTempFilePath({x:0,y:0,width:300,height:300,destWidth:350,destHeight:350,canvasId:"qrcode",success:function(e){t.setData({qrcodeImgUrl:e.tempFilePath}),e.tempFilePath||wx.showModal({title:"提示",content:"图片绘制中，请稍后重试",showCancel:!1}),t.saveImageToPhotosAlbum()},fail:function(t){wx.showModal({title:"提示",content:"图片绘制出错, 请稍后再试！",showCancel:!1})}})},hideview:function(){this.setData({display:"none"})},saveImageToPhotosAlbum:function(){var t=this,e=wx.createCanvasContext("myCanvas"),i="可用余额"+t.inputMoney+"元";e.fillStyle="#ffffff",e.fillRect(0,0,800,800),e.font="16px Arial",e.fillStyle="#bbb",e.fillText(t.expireAtTime,40,390),e.fillStyle="#000000",e.fillText(i,120,430),e.drawImage(t.barcodeImgUrl,23,48,290,100),e.drawImage(t.qrcodeImgUrl,80,180,180,180),e.draw(!1,(function(){t.canvasToImage()}))},canvasToImage:function(){var t=this;wx.canvasToTempFilePath({x:0,y:0,width:375,height:580,destWidth:375,destHeight:580,canvasId:"myCanvas",success:function(e){t.setData({shareImgSrc:e.tempFilePath}),e.tempFilePath||wx.showModal({title:"提示",content:"图片绘制中，请稍后重试",showCancel:!1}),t.saveImageToPhotos(e.tempFilePath)},fail:function(t){wx.showToast({title:"生成失败",icon:"none"})}})},saveImageToPhotos:function(t){var e=this;wx.saveImageToPhotosAlbum({filePath:t,success:function(t){wx.showModal({title:"图片保存成功",content:"图片成功保存到相册了，可以去分享了！",showCancel:!1,confirmText:"确定",confirmColor:"#20a4f7",success:function(t){t.confirm&&wx.navigateBack({delta:1}),e.setData({canvasHidden:!0})},fail:function(){wx.showToast({title:"保存失败",icon:"none"})}})}})}}};e.default=r},"36dc":function(t,e,i){var a=i("78d3");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("0005543e",a,!0,{sourceMap:!1,shadowMode:!1})},5904:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page box"},[i("v-uni-view",{staticClass:"content",style:"height: "+(t.screenHeight-230)+"px"},[i("v-uni-view",{staticClass:"box-barCode",style:"height: "+(t.screenHeight-230)/2.8+"px;margin: 0px auto;"},[i("v-uni-canvas",{staticClass:"barCode-pic",attrs:{"canvas-id":"barcode"}})],1),i("v-uni-view",{staticClass:"box-QRCode"},[i("v-uni-view",{staticClass:"QRCode-pic"},[i("v-uni-canvas",{staticClass:"QRCode-pic",attrs:{"canvas-id":"qrcode"}})],1),i("v-uni-text",{staticClass:"title"},[t._v(t._s(t.expireAtTime))])],1),i("v-uni-view",{staticClass:"bottom"},[i("v-uni-view",{staticClass:"bottom-left"}),i("v-uni-view",{staticClass:"bottom-right"}),i("v-uni-view",{staticClass:"bottom-content"},[t._v("可用余额"),i("v-uni-text",{staticClass:"bottom-font"},[t._v(t._s(t.inputMoney))]),t._v("元")],1)],1)],1),i("v-uni-view",{staticClass:"am-footer"},[i("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onShareTap.apply(void 0,arguments)}}},[t._v("保存图片")])],1),i("v-uni-view",{staticClass:"show",style:"display:"+t.display+";position: absolute;top: 1%;height: "+.75*t.screenHeight+"px",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideview.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"containera"},[i("v-uni-view",{staticClass:"fourlayoutstylea"},[i("v-uni-button",{attrs:{size:t.primarySize},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showLocal.apply(void 0,arguments)}}},[t._v("保存分享图片")])],1),i("v-uni-view",{staticClass:"canvas-box"},[i("v-uni-canvas",{staticClass:"canvas-box-ba",attrs:{"canvas-id":"myCanvas"}})],1)],1)],1)],1)},o=[]},"65fd":function(t,e,i){"use strict";i.r(e);var a=i("5904"),n=i("66ad");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("efec");var s,c=i("f0c5"),r=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"617f75fb",null,!1,a["a"],s);e["default"]=r.exports},"66ad":function(t,e,i){"use strict";i.r(e);var a=i("01a3"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"78d3":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".am-footer[data-v-617f75fb]{display:-webkit-box;display:-webkit-flex;display:flex;height:%?100?%;width:100%;text-align:center;position:absolute;bottom:40px;left:0}.am-footer uni-button[data-v-617f75fb]{border:#ff6a38 1px solid;border-radius:%?20?%;width:%?300?%;height:%?70?%;text-align:center;line-height:%?70?%;font-size:%?30?%;background-color:#fff;letter-spacing:2px;color:#e97855}.box[data-v-617f75fb]{background-color:#20a4f7;width:100vw;height:100vh;padding-top:30px;padding-left:5%}.content[data-v-617f75fb]{width:90%;padding-top:18px;background-color:#fff\r\n  /* border: 1px red solid */}.box-barCode[data-v-617f75fb]{width:90%;\r\n  /* height: 160px; */display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.barCode-pic[data-v-617f75fb]{width:96%;height:100px}.title[data-v-617f75fb]{margin-top:15px;color:#bbb}.box-QRCode[data-v-617f75fb]{width:90%;height:220px;margin-left:5%;margin-bottom:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?-20?%}.QRCode-pic[data-v-617f75fb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?350?%;height:%?350?%}.bottom[data-v-617f75fb]{width:100%;height:58px;border-top:1px #bbb solid}.bottom-left[data-v-617f75fb]{width:34px;height:34px;border-radius:17px;background:#20a4f7;margin-left:-17px;margin-top:-17px}.bottom-right[data-v-617f75fb]{width:34px;height:34px;border-radius:17px;background:#20a4f7;float:right;margin-top:-34px;margin-right:-17px}.bottom-content[data-v-617f75fb]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:15px}.bottom-font[data-v-617f75fb]{font-size:20px;color:red;margin:0 %?10?%}.share-title[data-v-617f75fb]{color:red;font-size:19px;font-weight:600}\r\n/* 按鈕 */.show[data-v-617f75fb]{background:#fff;text-align:center;width:90%;height:88%;z-index:1002;border:1px #87ceeb solid}.containera[data-v-617f75fb]{width:100%;height:100%}.fourlayoutstylea[data-v-617f75fb]{width:50%;height:%?200?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:absolute;bottom:0;left:50%;margin-left:-25%}.canvas-box-ba[data-v-617f75fb]{width:100%;height:100%}.canvas-box[data-v-617f75fb]{width:100%;height:100%}",""]),t.exports=e},efec:function(t,e,i){"use strict";var a=i("36dc"),n=i.n(a);n.a}}]);