(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-authModule-pages-switchRole-switchRole"],{"21c2":function(t,e){var i="/static/pages/authModule/resources/pic",a={image:i,logo:"".concat(i,"/logo.png"),regist:"".concat(i,"/regist.png"),help:"".concat(i,"/help.png"),forget:"".concat(i,"/forget.png"),wave:"".concat(i,"/wave.png"),loading:"".concat(i,"/loading.gif"),icRoleCheck:"".concat(i,"/ic_role_check.png"),user:"".concat(i,"/user.png"),maintainAdmin:"".concat(i,"/maintain_admin.png"),dormAdminAdmin:"".concat(i,"/dorm_admin_admin.png"),counsellAdmin:"".concat(i,"/counsell_admin.png"),passwordEyeOpen:"".concat(i,"/password_eye_open.png"),passwordEyeClose:"".concat(i,"/password_eye_close.png"),notFountImg:"".concat(i,"/404.png")};t.exports=a},"2f2f":function(t,e,i){"use strict";var a=i("d4d9"),o=i.n(a);o.a},5190:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".container[data-v-57c98b05]{width:100%;height:100%;background:#20a4f7;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:rows;flex-direction:rows;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?20?% %?180?%}\r\n\r\n/* 标题 */.myui-box__title[data-v-57c98b05]{width:90%;height:%?200?%}.box-text[data-v-57c98b05]{font-size:16pt;color:#fff}\r\n\r\n/* 角色 */.myui-box__center[data-v-57c98b05]{width:320px;height:350px;background:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding:%?20?% %?20?%}\r\n\r\n/* 默认用户角色 */.myui-center__title[data-v-57c98b05]{color:#9b9dad;font-size:13px}.myui-title__box[data-v-57c98b05]{width:100%;height:62px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:1px hsla(0,0%,93.3%,.5) solid}.title-pic[data-v-57c98b05]{width:42px;height:42px}.myui-title__image[data-v-57c98b05]{width:40%}.myui-title__text[data-v-57c98b05]{width:40%;color:#333;font-size:17px}\r\n\r\n/* 角色选择 */.myui-box__select[data-v-57c98b05]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.box-select-two[data-v-57c98b05]{width:95%;height:90%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.centerCss[data-v-57c98b05]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}\r\n\r\n/* 底部跳过 */.myui-bottom__text[data-v-57c98b05]{margin-top:%?30?%;width:%?100?%;height:%?80?%;color:#20a4f7}.box-select-admin[data-v-57c98b05]{width:290px;height:93px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;border-bottom:1px hsla(0,0%,93.3%,.5) solid}.admin-box[data-v-57c98b05]{width:60px;margin:%?12?% %?50?%;border-radius:%?70?%}.admin-pic[data-v-57c98b05]{width:50px;height:50px}.admin-text[data-v-57c98b05]{width:160px;height:100%;margin-right:%?30?%;font-size:12pt}",""]),t.exports=e},5754:function(t,e,i){"use strict";i.r(e);var a=i("70d8"),o=i.n(a);for(var l in a)"default"!==l&&function(t){i.d(e,t,(function(){return a[t]}))}(l);e["default"]=o.a},"6e87":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return l})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page container"},[i("v-uni-view",{staticClass:"myui-box__title centerCss"},[i("v-uni-text",{staticClass:" box-text"},[t._v("可选择角色")])],1),i("v-uni-view",{staticClass:"myui-box__center"},[i("v-uni-view",{staticClass:"myui-box__select"},[i("v-uni-view",{staticClass:"box-select-two centerCss"},[i("v-uni-view",{staticClass:"myui-title__box",attrs:{id:"00"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectRole.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"admin-box"},[i("v-uni-image",{staticClass:"title-pic",attrs:{src:t.AuthImageUrl.user}})],1),i("v-uni-view",{staticClass:"myui-title__text"},[t._v("默认角色")]),i("v-uni-view",{staticClass:"centerCss"},[i("v-uni-image",{staticStyle:{width:"26px",height:"23px"},attrs:{src:t.AuthImageUrl.icRoleCheck}})],1)],1),i("v-uni-scroll-view",{staticStyle:{height:"220px"},attrs:{"scroll-y":!0}},t._l(t.roleList,(function(e,a){return i("v-uni-view",{key:a},[i("v-uni-view",{staticClass:"myui-title__box",attrs:{id:a,"hover-class":"weui-cell_active"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectRole.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"admin-box"},[i("v-uni-image",{staticClass:"title-pic",attrs:{src:e.imageUrl}})],1),i("v-uni-view",{staticClass:"myui-title__text"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"weui-cell__ft weui-cell__ft_in-access"})],1)],1)})),1)],1),i("v-uni-view",{staticClass:"myui-bottom__text"},[i("v-uni-text",{staticClass:" centerCss",staticStyle:{width:"100rpx",height:"50rpx","border-bottom":"2px #20a4f7 solid"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindSkip.apply(void 0,arguments)}}},[t._v("跳过")])],1)],1)],1)],1)},l=[]},"70d8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=getApp(),o=i("21c2"),l={data:function(){return{AuthImageUrl:o,loginObj:{},roleList:[]}},components:{},props:{},onLoad:function(t){var e=a.globalData.StorageUtil.get("loginObjCach");a.globalData.ShowMsgUtil.showLoadAndMsgToast("加载中",1e3),console.log("角色数组",e.roleList),null==e.roleList||e.roleList.length>0&&(e.roleList=this.dealRoleList(e.roleList)),console.log(e.roleList),this.setData({roleList:e.roleList,loginObj:e})},onShow:function(){console.log("------------------------切换角色------------------------")},methods:{dealRoleList:function(t){for(var e=[],i=0,a=0;a<t.length;++a){var l={};"3"==t[a]?(l.id=3,l.name="宿舍管理员",l.imageUrl=o.dormAdminAdmin):"4"==t[a]?(l.id=4,l.name="辅导员",l.imageUrl=o.counsellAdmin):"5"==t[a]&&(l.id=5,l.name="维修工",l.imageUrl=o.maintainAdmin),"3"!=t[a]&&"4"!=t[a]&&"5"!=t[a]||(e[i]=l,i++)}return e},selectRole:function(t){console.log("选择角色为",t.currentTarget.id);var e=t.currentTarget.id;"00"==e?this.switchRoleRequest(this.loginObj):this.switchRoleRequest(this.loginObj,this.roleList[e].id)},bindSkip:function(){this.switchRoleRequest(this.loginObj)},switchRoleRequest:function(t,e){var i;console.log(1111111111),a.globalData.ShowMsgUtil.netErrNotice(),i=a.globalData.StorageUtil.get("userInfoCach",1)?a.globalData.StorageUtil.get("userInfoCach").token:t.tokenByLoginAndSwitch,a.globalData.ShowMsgUtil.showLoadAndMsgToast("加载中"),wx.request({url:a.globalData.RequestUrl.baseRequestUrl.switchRole,data:{username:t.username,role:e},header:{token:i,"content-type":"application/json"},method:"POST",success:function(t){if(wx.hideToast({}),t.data&&200==t.data.code){console.log(222222),console.log("用户信息",t.data);var i=t.data.rows;a.globalData.StorageUtil.set("userInfoCach",i),a.globalData.ShowMsgUtil.showSuccessToast("选择成功",1e3),console.log(i.department,i.mobile),console.log(e,a.globalData.Constant.roleTypeConstant.MAINTAIN_MAN),console.log(a.globalData.CheckUtil.isNotBlank(i.mobile)),console.log(i.mobile,i.department,i.role),a.globalData.CheckUtil.isNotBlank(i.department)||a.globalData.CheckUtil.isNotBlank(i.mobile)||a.globalData.CheckUtil.isNotBlank(i.role)?(console.log(3333333333),e==a.globalData.Constant.roleTypeConstant.MAINTAIN_MAN?a.globalData.PublicUtil.reLaunchByUrl(a.globalData.PageUrl.repairPageUrl.index,1e3):(a.globalData.showOnlyABC,a.globalData.PublicUtil.reLaunchByUrl(a.globalData.PageUrl.taBarPageUrl.indexUrl+"?noRefresh=1",1e3))):a.globalData.PublicUtil.reLaunchByUrl(a.globalData.PageUrl.taBarPageUrl.indexUrl+"?noRefresh=1",1e3)}},fail:function(){wx.hideToast({}),a.globalData.ShowMsgUtil.showNoneToastByFail()}})}}};e.default=l},ba29:function(t,e,i){"use strict";i.r(e);var a=i("6e87"),o=i("5754");for(var l in o)"default"!==l&&function(t){i.d(e,t,(function(){return o[t]}))}(l);i("2f2f");var n,s=i("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"57c98b05",null,!1,a["a"],n);e["default"]=c.exports},d4d9:function(t,e,i){var a=i("5190");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("465fe6dd",a,!0,{sourceMap:!1,shadowMode:!1})}}]);