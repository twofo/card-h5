(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-indexModule-pages-payRoll-payRoll"],{"0517":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'.top[data-v-4673e3a0]{margin-top:%?15?%}.box-top[data-v-4673e3a0]{margin-top:%?50?%}.bottom[data-v-4673e3a0]{margin-top:%?160?%}uni-button[type="primary"][data-v-4673e3a0]{background-color:#20a4f7}.bottom-top[data-v-4673e3a0]{margin-top:%?200?%}.input-title[data-v-4673e3a0]{margin-left:%?10?%}',""]),t.exports=e},"07a0":function(t,e,a){"use strict";a.r(e);var i=a("b279"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},2206:function(t,e,a){"use strict";var i=a("dcb1"),s=a.n(i);s.a},9206:function(t,e,a){"use strict";a.r(e);var i=a("cca5"),s=a("07a0");for(var n in s)"default"!==n&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("2206");var o,l=a("f0c5"),c=Object(l["a"])(s["default"],i["b"],i["c"],!1,null,"4673e3a0",null,!1,i["a"],o);e["default"]=c.exports},b279:function(t,e,a){"use strict";var i=a("4ea4");a("a9e3"),a("b680"),a("acd8"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(a("ade3")),n=getApp(),o={data:function(){return{numberList:["一次","多次"],numId:0,timeList:["当日"],timeId:0,inputMoney:"",balance:""}},components:{},props:{},onLoad:function(t){console.log("------------------------代付劵------------------------");var e=parseFloat(t.balance);e=(e/100).toFixed(2),console.log(e),this.setData({balance:e});var a=(new Date).getHours();this.getTimeListByHours(a)},onShow:function(){},methods:{getTimeListByHours:function(t){for(var e=24-t,a=1;a<e;++a)this.setData((0,s.default)({},"timeList["+a+"]",a+"小时"))},inputMoneyFun:function(t){this.setData({inputMoney:t.detail.value})},verifyMoney:function(t){return/(^(([0-9]+\.[0-9]{1,2})|([0-9]*[1-9][0-9]*\.[0-9]{1,2})|([0-9]*[1-9][0-9]*))$)/.test(t)?(t=parseFloat(t),t=t.toFixed(2),!(Number(t)>Number(this.balance))||(console.log("balance",this.balance),n.globalData.ShowMsgUtil.showErrorModal("输入金额不能比余额大","请重新输入"),!1)):(n.globalData.ShowMsgUtil.showErrorModal("金额输入格式不正确","请重新输入"),!1)},bindPickerChangeOfTime:function(t){this.setData({timeId:t.detail.value})},selectNumber:function(){var t=this;wx.showActionSheet({itemList:["一次","多次"],success:function(e){e.cancel||t.setData({numId:e.tapIndex})}})},confirmSet:function(){var t=n.globalData.StorageUtil.get("userInfoCach");if(1!=t.isMortal){var e=this.inputMoney;n.globalData.ShowMsgUtil.showLoadAndMsgToast();var a=n.globalData.StorageUtil.get("userDetailCach");if(""===e)return wx.hideToast({}),void n.globalData.ShowMsgUtil.showErrorModal("请设置金额","请求失败");this.verifyMoney(e)?this.requestOfPay(t,a):wx.hideToast({})}else n.globalData.ShowMsgUtil.showErrorModal("提醒","培训人员暂不支持该功能！")},requestOfPay:function(t,e){var a=this,i=!0;1==a.numId&&(i=!1),n.globalData.ShowMsgUtil.netErrNotice(),wx.request({url:n.globalData.RequestUrl.payRequestUrl.getShareCode,data:{onlyOnce:i,timeout:a.timeId,amountLimit:a.inputMoney,cardCode:e.cardNumber},header:{token:t.token,"content-type":"application/json"},method:"POST",success:function(t){console.log("请求代付劵设置",t.data),t.data&&200==t.data.code?n.globalData.PublicUtil.navigateByUrl(n.globalData.PageUrl.indexPageUrl.payRollCode+"?inputMoney="+a.inputMoney+"&expireAtTime="+t.data.rows.expireAtTime+"&authCode="+t.data.rows.authCode,500):n.globalData.ShowMsgUtil.showErrorModal("请求失败",t.data.msg,t.data.code)},fail:function(){n.globalData.ShowMsgUtil.showNoneToastByFail()}})}}};e.default=o},cca5:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page"},[a("v-uni-view",{staticClass:"page__bd"},[a("v-uni-view",{staticClass:"weui-cells weui-cells_after-title box-top"},[a("v-uni-view",{staticClass:"weui-cell weui-cell_access",attrs:{"hover-class":"weui-cell_active"}},[a("v-uni-view",{staticClass:"weui-cell__bd"},[t._v("金额")]),a("v-uni-input",{staticClass:"weui-cell__ft",attrs:{type:"digit",maxlength:"4"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputMoneyFun.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"input-title"},[t._v("元")])],1)],1),a("v-uni-view",{staticClass:"weui-cells weui-cells_after-title top"},[a("v-uni-view",{staticClass:"weui-cell weui-cell_access",attrs:{"hover-class":"weui-cell_active"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectNumber.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"weui-cell__bd"},[t._v("使用次数")]),a("v-uni-view",{staticClass:"weui-cell__ft weui-cell__ft_in-access"},[t._v(t._s(t.numberList[t.numId]))])],1)],1),a("v-uni-view",{staticClass:"weui-cells weui-cells_after-title top"},[a("v-uni-picker",{attrs:{value:t.timeId,range:t.timeList},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindPickerChangeOfTime.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"weui-cell weui-cell_access",attrs:{"hover-class":"weui-cell_active"}},[a("v-uni-view",{staticClass:"weui-cell__bd"},[t._v("使用时间")]),t.timeId?a("v-uni-view",[a("v-uni-view",{staticClass:"weui-cell__ft weui-cell__ft_in-access"},[t._v(t._s(t.timeList[t.timeId]))])],1):a("v-uni-view",[a("v-uni-view",{staticClass:"weui-cell__ft weui-cell__ft_in-access"},[t._v(t._s(t.timeList[0]))])],1)],1)],1)],1),a("v-uni-view",{staticClass:"page__bd page__bd_spacing bottom"},[a("v-uni-button",{staticClass:"weui-btn",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmSet.apply(void 0,arguments)}}},[t._v("确定")])],1)],1),a("v-uni-view",{staticClass:"page__bd setLimit-view bottom-top"},[a("v-uni-view",{staticClass:"weui-article"},[a("v-uni-view",{staticClass:"weui-article__h1 h1-font"},[t._v("温馨提示")]),a("v-uni-view",{staticClass:"weui-article__section"},[a("v-uni-view",{staticClass:"weui-media-box__desc desc-font"},[t._v("1. 分享给他人的代金劵用于消费，每笔消费金额将从分享者本人的账户扣除对应的金额。")]),a("v-uni-view",{staticClass:"weui-media-box__desc desc-font"},[t._v("2. 未消费完的代金劵金额，将于时间结束后失效。")])],1)],1)],1)],1)},n=[]},dcb1:function(t,e,a){var i=a("0517");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("4f06").default;s("e599c130",i,!0,{sourceMap:!1,shadowMode:!1})}}]);