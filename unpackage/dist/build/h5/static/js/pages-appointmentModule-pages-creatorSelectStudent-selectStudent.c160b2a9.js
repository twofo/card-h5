(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-appointmentModule-pages-creatorSelectStudent-selectStudent"],{3977:function(e,t,a){"use strict";a.r(t);var o=a("5fe5"),l=a("8ea8");for(var n in l)"default"!==n&&function(e){a.d(t,e,(function(){return l[e]}))}(n);a("65af");var s,r=a("f0c5"),i=Object(r["a"])(l["default"],o["b"],o["c"],!1,null,"12086f0a",null,!1,o["a"],s);t["default"]=i.exports},"5f48":function(e,t,a){var o=a("cdb8");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var l=a("4f06").default;l("a082c178",o,!0,{sourceMap:!1,shadowMode:!1})},"5fe5":function(e,t,a){"use strict";var o;a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return o}));var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page",attrs:{"xmlns:wx":"http://www.w3.org/1999/xhtml"}},[a("v-uni-view",{staticClass:"searchBox"},[a("search-inp",{attrs:{placeholder:"请输入名字"},on:{searchInp:function(t){arguments[0]=t=e.$handleEvent(t),e.seachSch.apply(void 0,arguments)},mysearchValLen:function(t){arguments[0]=t=e.$handleEvent(t),e.mysearchValLen.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"page__bd"},[a("select-recevice",{attrs:{checkboxItems:e.checkboxItems,disableds:e.disableds,checkAll:e.checkAll},on:{myevent:function(t){arguments[0]=t=e.$handleEvent(t),e.onMyEvent.apply(void 0,arguments)}}})],1)],1)},n=[]},"65af":function(e,t,a){"use strict";var o=a("5f48"),l=a.n(o);l.a},"6e44":function(e,t,a){"use strict";var o=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=o(a("e8d7")),n=o(a("fa13")),s=getApp(),r={data:function(){return{checkboxItems:[],checkAll:{name:"全选",value:"00",checked:!1},disableds:!1,limitSelectPerson:""}},components:{selectRecevice:l.default,searchInp:n.default},props:{},onLoad:function(e){if(console.log("------------------------选择人员 - 学生------------------------"),e.limitSelectPerson){var t=e.limitSelectPerson;this.setData({limitSelectPerson:t});var a=this.showSecondData(t);console.log("haveCheckboxItem-",a),this.selectPersonnel(e.parentId,a)}},onShow:function(){this.disableds;this.setData({disableds:!1})},methods:{showSecondData:function(e){this.checkboxItems;var t=[];return"attendee"==this.limitSelectPerson?t=s.globalData.StorageUtil.get("attendeeStudentCach"):"hoster"==this.limitSelectPerson?t=s.globalData.StorageUtil.get("hosterCach"):"recoder"==this.limitSelectPerson&&(t=s.globalData.StorageUtil.get("recoderCach")),t},selectPersonnel:function(e,t){s.globalData.ShowMsgUtil.showLoadAndMsgToast();var a=this;s.globalData.ShowMsgUtil.netErrNotice();var o=s.globalData.StorageUtil.get("userInfoCach");wx.request({url:s.globalData.RequestUrl.appointmentRequestUrl.selectPersonnel+"?selectType=4&parentId="+e,method:"GET",header:{token:o.token},success:function(e){if(console.log('人员选择（学生）"',e.data),e.data&&200==e.data.code){for(var o=0;o<e.data.rows.length;++o)e.data.rows[o].value=o,e.data.rows[o].enable=!0,t.length>0&&(console.log("haveCheckboxItem-",t),""!=t&&(e.data.rows[o]=a.dealSelectPerson(t,e.data.rows[o])));a.setData({checkboxItems:e.data.rows})}else s.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code)},fail:function(){s.globalData.ShowMsgUtil.showNoneToastByFail()},complete:function(){wx.hideToast({})}})},dealSelectPerson:function(e,t){for(var a=0;a<e.length;++a)1==e[a].isUpdate?t.level==e[a].level&&t.id==e[a].infoId&&(t.checked=!0,t.enable=!1):t.level==e[a].level&&t.id==e[a].id&&(t.checked=!0,t.enable=!1);return t},onMyEvent:function(e){var t=e.detail.valueType,a=(e.detail.parentId,this.limitSelectPerson);this.disableds;this.setData({disableds:!0});var o=e.detail.checkboxItems;if(o)if("attendee"==a){if(1==t);else if(2==t){var l=s.globalData.StorageUtil.get("attendeeStudentCach"),n=[];if(l.length>0){n=this.handlerUpdateData(l);for(var r=n.length,i=0;i<o.length;i++){var c=this.dealIsExist(n,o[i]);c||(n[r++]=o[i])}}else n=o;l=n,console.log("选择参会人(学生) - ",l),s.globalData.StorageUtil.set("attendeeStudentCach",l),wx.navigateBack({delta:3})}}else"hoster"==a?this.dealCach(o,"hoster"):"recoder"==a?this.dealCach(o,"recoder"):(s.globalData.ShowMsgUtil.showNoneToast("选择有误",3e3),wx.navigateBack({delta:3}))},handlerUpdateData:function(e){for(var t=[],a=0,o=0;o<e.length;o++)e.isUpdate&&1==e.isUpdate||(t[a]=e[o],a++);return t},dealIsExist:function(e,t){for(var a=0;a<e.length;a++)if(e[a].level==t.level&&e[a].id==t.id)return!0;return!1},dealCach:function(e,t){var a=s.globalData.StorageUtil.get(t+"Cach");if(e.length>=2||a.length>=2)return s.globalData.StorageUtil.set(t+"Cach",e),s.globalData.ShowMsgUtil.showNoneToast("选择人数不能超过一个",3e3),void this.setData({disableds:!1});s.globalData.StorageUtil.set(t+"Cach",e),wx.navigateBack({delta:3})},seachSch:function(e){console.log(e);var t=e.detail.value,a=this;s.globalData.ShowMsgUtil.netErrNotice();var o=s.globalData.StorageUtil.get("userInfoCach");wx.request({url:s.globalData.RequestUrl.appointmentRequestUrl.searchPersonnel+"?personType=0&userName="+t,method:"GET",header:{token:o.token},success:function(e){if(wx.hideToast({}),console.log("搜素选择人员",e.data),e.data&&200==e.data.code){for(var t=[],o=0;o<e.data.rows.length;++o){var l={};l.id=e.data.rows[o].userId,l.name=e.data.rows[o].userName,l.type=e.data.rows[o].userType,t[o]=l}a.setData({checkboxItems:t})}else s.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code)},fail:function(){s.globalData.ShowMsgUtil.showNoneToastByFail()}})},mysearchValLen:function(e){var t=e.detail.valLength;0==t&&this.selectPersonnel("")}}};t.default=r},"8ea8":function(e,t,a){"use strict";a.r(t);var o=a("6e44"),l=a.n(o);for(var n in o)"default"!==n&&function(e){a.d(t,e,(function(){return o[e]}))}(n);t["default"]=l.a},cdb8:function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,"\r\n/* pages/appointmentModule//pages/creatorSelectStudent/selectStudent.wxss */.searchBox[data-v-12086f0a]{padding:0 %?20?%;box-sizing:border-box}",""]),e.exports=t}}]);