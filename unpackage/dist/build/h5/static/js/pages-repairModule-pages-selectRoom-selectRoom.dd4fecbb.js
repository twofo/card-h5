(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-repairModule-pages-selectRoom-selectRoom"],{"1ad2":function(t,e,a){"use strict";a.r(e);var o=a("2179"),i=a.n(o);for(var r in o)"default"!==r&&function(t){a.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},2179:function(t,e,a){"use strict";var o=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(a("3fb6")),r=getApp(),l=r.globalData.ImageUrl,n={data:function(){return{imageUrl:l,builds:[],selectBuildIndex:0,floors:[],rooms:[],roomList:[],inputVlue:"",roomObj:"",scrollTop:0}},components:{repairDetail:i.default},props:{},onLoad:function(t){this.getBuilds()},methods:{getBuilds:function(){var t=this;r.globalData.ShowMsgUtil.netErrNotice();var e=r.globalData.StorageUtil.get("userInfoCach");wx.request({url:r.globalData.RequestUrl.baseRequestUrl.getBuildList,method:"GET",header:{token:e.token},success:function(e){console.log("获取楼栋信息返回",e.data),e.data&&200==e.data.code?(t.setData({builds:e.data.rows}),e.data.rows.length<1?r.globalData.ShowMsgUtil.showErrorModal("请求失败","当前账号未分配楼栋管理权限！"):(r.globalData.StorageUtil.set("buildsByAdminId",e.data.rows),t.getRoomsByBuildId(e.data.rows[0].id))):r.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code)},fail:function(){r.globalData.ShowMsgUtil.showNoneToastByFail()}})},selectBuild:function(t){var e=this;r.globalData.StorageUtil.get("buildsByAdminId");this.setData({selectBuildIndex:t.currentTarget.id});var a=this.builds[t.currentTarget.id].id;0==e.builds.length?r.globalData.ShowMsgUtil.showErrorModal("查询失败","未负责楼栋"):this.getRoomsByBuildId(a)},getRoomsByBuildId:function(t){var e=this;r.globalData.ShowMsgUtil.netErrNotice();var a=r.globalData.StorageUtil.get("userInfoCach"),o=[];wx.request({url:r.globalData.RequestUrl.baseRequestUrl.getRoomByBuildId+t+"/rooms",method:"GET",header:{token:a.token},success:function(t){if(console.log("根据楼栋获取房间返回",t.data),t.data&&200==t.data.code){for(var a=0;a<t.data.rows.length;++a){var i={};i.id=t.data.rows[a].floorId,i.name=t.data.rows[a].floorName,i.byFloor=2,o[a]=i}for(var l=0;l<t.data.rows.length;++l){var n={};n=t.data.rows[l],n.byRoom=3,t.data.rows[l]=n}e.setData({floors:o,rooms:t.data.rows})}else r.globalData.ShowMsgUtil.showErrorModal("请求失败",t.data.msg,t.data.code)},fail:function(){r.globalData.ShowMsgUtil.showNoneToastByFail()}})},clickRoomBox:function(t){console.log("点击房间 - ",t);var e=t.currentTarget.id,a=t.currentTarget.dataset.roomcode,o=t.currentTarget.dataset.roomName,i={};i.id=e,i.name=this.builds[this.selectBuildIndex].name+"-"+o,i.code=a,uni.$emit("updatedData",{roomObj:i}),uni.navigateBack({delta:1})}}};e.default=n},2670:function(t,e,a){"use strict";var o;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page"},[a("v-uni-view",{staticClass:"page__bd"},[a("v-uni-view",{staticClass:"content box-select"},[a("v-uni-view",{staticClass:"left"},[t._l(t.builds,(function(e,o){return[a("v-uni-view",{key:o+"_0",class:"left-item "+(t.selectBuildIndex==o?"active":""),attrs:{id:o},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectBuild.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"left-title"},[t._v(t._s(e.name))])],1)]}))],2),a("v-uni-view",{staticClass:"right"},[a("v-uni-view",{staticClass:"right-box"},[a("v-uni-view",{staticClass:"search-box"},[a("v-uni-image",{staticClass:"search-pic",attrs:{src:t.imageUrl.search}}),a("v-uni-input",{staticClass:"search-input",attrs:{placeholder:"请输入房间号"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.searchRoom.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"floor"},[a("v-uni-scroll-view",{staticStyle:{height:"484px"},attrs:{"scroll-y":!0,"scroll-top":t.scrollTop}},[0==t.roomList.length&&""==t.inputVlue?a("v-uni-view",[t._l(t.rooms,(function(e,o){return[a("v-uni-view",{key:o+"_0",staticClass:"floor-box"},[a("v-uni-text",{staticClass:"floor-title"},[t._v("第 "+t._s(e.floorName))]),a("v-uni-view",{staticClass:"room-box"},[t._l(e.rooms,(function(e,o){return[a("v-uni-view",{key:o+"_0",staticClass:"room-item",attrs:{id:e.id,"data-roomCode":e.roomCode,"data-roomName":e.name},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickRoomBox.apply(void 0,arguments)}}},[a("v-uni-text",[t._v(t._s(e.name))])],1)]}))],2)],1)]}))],2):t._e(),t.roomList.length>0?a("v-uni-view",[a("v-uni-view",{staticClass:"floor-box"},[a("v-uni-text",{staticClass:"floor-title"},[t._v("搜素结果")]),a("v-uni-view",{staticClass:"room-box"},[t._l(t.roomList,(function(e,o){return[a("v-uni-view",{key:o+"_0",staticClass:"room-item",attrs:{id:e.id,"data-roomCode":e.roomCode},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickRoomBox.apply(void 0,arguments)}}},[a("v-uni-text",[t._v(t._s(e.name))])],1)]}))],2)],1)],1):t._e(),0==t.roomList.length&&t.inputVlue?a("v-uni-view",[a("v-uni-view",{staticClass:"floor-box"},[a("v-uni-text",{staticClass:"floor-title"},[t._v("未搜素到房间")])],1)],1):t._e()],1)],1)],1)],1)],1)],1)],1)},r=[]},"6ff8":function(t,e,a){"use strict";var o=a("d53f"),i=a.n(o);i.a},a210:function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,".content[data-v-59beecd2]{\r\n  /* border: 1px red solid; */display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;margin-top:%?20?%}.box-select[data-v-59beecd2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}\r\n/* 楼栋 */.active[data-v-59beecd2]{background:#fff;color:#20a4f7}.left-item[data-v-59beecd2]{width:97px;height:50px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.left-title[data-v-59beecd2]{font-size:17px}\r\n/* 房间 */.right[data-v-59beecd2]{width:270px;height:540px;background:#fff}.right-box[data-v-59beecd2]{width:253px;height:540px;margin-left:17px\r\n  /* border: 1px red solid; */}.search-box[data-v-59beecd2]{width:240px;height:30px;background:#f5f5f5;margin-top:8px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.search-pic[data-v-59beecd2]{width:19px;height:19px;margin:5px 0;margin-left:16px}.search-input[data-v-59beecd2]{width:191px;height:20px;margin-top:2px;margin-left:16px;color:#a7a7a7}\r\n/*  */.floor-box[data-v-59beecd2]{width:250px;margin-bottom:15px\r\n  /* border: 1px red solid;  */}.floor[data-v-59beecd2]{margin-top:16px}.room-box[data-v-59beecd2]{font-size:14px;margin-top:5px;overflow:hidden}.room-item[data-v-59beecd2]{height:%?20?%;margin-top:10px;margin-right:8px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;border:1px silver solid;position:relative;float:left;padding:%?30?% %?10?%;box-sizing:border-box}.check-box[data-v-59beecd2]{width:100%;height:265px;background:#fff}",""]),t.exports=e},d53f:function(t,e,a){var o=a("a210");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("4f06").default;i("06481a03",o,!0,{sourceMap:!1,shadowMode:!1})},d5a7:function(t,e,a){"use strict";a.r(e);var o=a("2670"),i=a("1ad2");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("6ff8");var l,n=a("f0c5"),s=Object(n["a"])(i["default"],o["b"],o["c"],!1,null,"59beecd2",null,!1,o["a"],l);e["default"]=s.exports}}]);