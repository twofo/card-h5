(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-appointmentModule-pages-creatorSelectMajor-selectMajor"],{"06bb":function(e,t,a){"use strict";a.r(t);var l=a("7570"),o=a.n(l);for(var n in l)"default"!==n&&function(e){a.d(t,e,(function(){return l[e]}))}(n);t["default"]=o.a},1733:function(e,t,a){"use strict";var l=a("6a54"),o=a.n(l);o.a},"5ffd":function(e,t,a){"use strict";a.r(t);var l=a("bf7e"),o=a("06bb");for(var n in o)"default"!==n&&function(e){a.d(t,e,(function(){return o[e]}))}(n);a("1733");var s,r=a("f0c5"),i=Object(r["a"])(o["default"],l["b"],l["c"],!1,null,"9e9f3c98",null,!1,l["a"],s);t["default"]=i.exports},"6a54":function(e,t,a){var l=a("750a");"string"===typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);var o=a("4f06").default;o("55460980",l,!0,{sourceMap:!1,shadowMode:!1})},"750a":function(e,t,a){var l=a("24fb");t=l(!1),t.push([e.i,".searchBox[data-v-9e9f3c98]{padding:0 %?20?%;box-sizing:border-box}",""]),e.exports=t},7570:function(e,t,a){"use strict";var l=a("4ea4");a("a434"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(a("e8d7")),n=l(a("fa13")),s=getApp(),r={data:function(){return{checkboxItems:[],checkAll:{name:"全选",value:"00",checked:!1},disableds:!1,limitSelectPerson:"",parentId:""}},components:{selectRecevice:o.default,searchInp:n.default},props:{},onLoad:function(e){if(console.log("------------------------选择专业------------------------"),console.log("院系跳转到专业的数据",e),s.globalData.ShowMsgUtil.showLoadAndMsgToast(),this.setData({parentId:e.parentId}),e.limitSelectPerson){var t=e.limitSelectPerson,a=this.disableds;a="hoster"==t||"recoder"==t,this.setData({limitSelectPerson:t,disableds:a})}},onShow:function(){var e=this.showSecondData();this.selectPersonnel(e)},methods:{showSecondData:function(){var e=this.limitSelectPerson,t=(this.checkboxItems,[]);return"attendee"==e&&(t=s.globalData.StorageUtil.get("attendeeStudentCach")),t},selectPersonnel:function(e){var t=this;s.globalData.ShowMsgUtil.netErrNotice();var a=s.globalData.StorageUtil.get("userInfoCach");wx.request({url:s.globalData.RequestUrl.appointmentRequestUrl.selectPersonnel+"?selectType=2&parentId="+this.parentId,method:"GET",header:{token:a.token},success:function(a){if(a.data&&200==a.data.code){for(var l=0;l<a.data.rows.length;++l)a.data.rows[l].value=l,a.data.rows[l].enable=!0,""!=e&&(a.data.rows[l]=t.dealSelectPerson(e,a.data.rows[l]));t.setData({checkboxItems:a.data.rows})}else s.globalData.ShowMsgUtil.showErrorModal("请求失败",a.data.msg,a.data.code)},fail:function(){s.globalData.ShowMsgUtil.showNoneToastByFail()}})},dealSelectPerson:function(e,t){for(var a=0;a<e.length;++a)e[a].isUpdate,t.level==e[a].level&&t.id==e[a].id&&(t.checked=!0,t.enable=!1);return t},onMyEvent:function(e){var t=this.limitSelectPerson,a=e.detail.valueType,l=e.detail.parentId,o=this.checkboxItems,n=[],r=e.detail.checkboxItems;if(r){console.log("选中的专业----",r);var i=s.globalData.StorageUtil.get("attendeeStudentCach"),c=[];if(i.length>0){n=this.cancelChecked(o,r);var d=this.cancelChecked(i,n);null!=d&&(i=d),c=this.handlerUpdateData(i);for(var u=c.length,h=0;h<r.length;h++){var f=this.dealIsExist(c,r[h]);f||(c[u++]=r[h])}console.log(c)}else c=r;if(i=c,console.log("选择参会人(专业) - ",i),"attendee"==t?s.globalData.StorageUtil.set("attendeeStudentCach",i):"hoster"==t?s.globalData.StorageUtil.set("hosterCach",i):"recoder"==t&&s.globalData.StorageUtil.set("recoderCach",i),1==a){console.log("选择班级");var g=s.globalData.PublicUtil.isFristEnter();console.log("isFrist-",g),g?s.globalData.PublicUtil.navigateByUrl(s.globalData.PageUrl.appointmentPageUrl.selectClasslUrl+"?parentId="+l+"&limitSelectPerson="+t,500):s.globalData.PublicUtil.reLaunchByUrl(s.globalData.PageUrl.appointmentPageUrl.selectClasslUrl+"?parentId="+l+"&limitSelectPerson="+t,500)}else 2==a&&wx.navigateBack({delta:2})}},handlerUpdateData:function(e){for(var t=[],a=0,l=0;l<e.length;l++)e[l].isUpdate&&1==e[l].isUpdate||(t[a]=e[l],a++);return t},dealIsExist:function(e,t){for(var a=0;a<e.length;a++)if(e[a].level==t.level&&e[a].id==t.id)return!0;return!1},cancelChecked:function(e,t){for(var a=0,l=e.length;a<l;a++)for(var o=0,n=t.length;o<n;o++)if(e[a].id==t[o].id&&e[a].level==t[o].level)return e.splice(a,1),e},seachSch:function(e){console.log(e);var t=e.detail.value,a=this,l=s.globalData.StorageUtil.get("userInfoCach"),o=s.globalData.RequestUrl.appointmentRequestUrl.searchPersonnel+"?personType=0&userName="+t;wx.request({url:o,method:"GET",header:{token:l.token},success:function(e){if(console.log("搜素选择人员",e.data),e.data&&200==e.data.code){for(var t=[],l=0;l<e.data.rows.length;++l){var o={};o.id=e.data.rows[l].userId,o.name=e.data.rows[l].userName,o.type=e.data.rows[l].userType,t[l]=o}a.setData({checkboxItems:t,disableds:!1})}else s.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code)},fail:function(){s.globalData.ShowMsgUtil.showNoneToastByFail()}})},mysearchValLen:function(e){var t=e.detail.valLength;0==t&&this.selectPersonnel("")}}};t.default=r},bf7e:function(e,t,a){"use strict";var l;a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return l}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page",attrs:{"xmlns:wx":"http://www.w3.org/1999/xhtml"}},[a("v-uni-view",{staticClass:"page__bd"},[a("select-recevice",{attrs:{disableds:e.disableds,checkboxItems:e.checkboxItems,checkAll:e.checkAll},on:{myevent:function(t){arguments[0]=t=e.$handleEvent(t),e.onMyEvent.apply(void 0,arguments)}}})],1)],1)},n=[]}}]);