(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-repairModule-pages-studentRepairComment-studentRepairComment"],{3126:function(e,a,t){var i=t("c900");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=t("4f06").default;n("572b19be",i,!0,{sourceMap:!1,shadowMode:!1})},"651f":function(e,a,t){"use strict";t.r(a);var i=t("e235"),n=t("857f");for(var s in n)"default"!==s&&function(e){t.d(a,e,(function(){return n[e]}))}(s);t("a18e");var o,c=t("f0c5"),r=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,"65887242",null,!1,i["a"],o);a["default"]=r.exports},7809:function(e,a,t){t("ac1f"),t("466d")},"857f":function(e,a,t){"use strict";t.r(a);var i=t("930b"),n=t.n(i);for(var s in i)"default"!==s&&function(e){t.d(a,e,(function(){return i[e]}))}(s);a["default"]=n.a},"930b":function(e,a,t){"use strict";var i=t("4ea4");t("99af"),t("baa5"),t("a434"),t("4d63"),t("ac1f"),t("25f0"),t("5319"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(t("ade3")),s=getApp(),o=t("c2d6"),c=(t("7809"),{data:function(){return(0,n.default)({repairCode:"",checkboxItems:[{name:"匿名评价",value:"0",checked:!0}],radioItems:[{classname:o.starOn,value:"1",checked:!0},{classname:o.starOff,value:"2",checked:!1},{classname:o.starOff,value:"3",checked:!1},{classname:o.starOff,value:"4",checked:!1},{classname:o.starOff,value:"5",checked:!1}],stars:1,files:[],imageBase64:[],img:o.icClose,inputText:"",nameOfMaintainer:"",disabled:!1},"img",[o.icClose,o.icClose])},components:{},props:{},onLoad:function(e){console.log("------------------------报修评论------------------------"),this.setData({repairCode:e.repairCode,nameOfMaintainer:e.nameOfMaintainer})},methods:{checkboxChange:function(e){for(var a=this.checkboxItems,t=e.detail.value,i=0,n=a.length;i<n;++i){a[i].checked=!1;for(var s=0,o=t.length;s<o;++s)if(a[i].value==t[s]){a[i].checked=!0;break}}this.setData({checkboxItems:a})},radioChange:function(e){var a=this.radioItems;console.log(a);for(var t=0;t<e.detail.value;t++)a[t].checked=!0,a[t].classname=o.starOn;for(var i=e.detail.value;i<a.length;i++)a[i].checked=!1,a[i].classname=o.starOff;this.setData({radioItems:a,stars:e.detail.value})},bindTextAreaBlur:function(e){this.setData({inputText:e.detail.value})},chooseImage:function(e){var a,t=this;t.files.length<2?(a="android"==e.platform?["拍摄","从相册中选择","取消"]:["拍摄","从相册中选择"],wx.showActionSheet({itemList:a,success:function(e){"0"==e.tapIndex?t.takeCamera():"1"==e.tapIndex&&t.takePhoto()}})):s.globalData.ShowMsgUtil.showErrorModal("只能传两张！","超过上传图片的个数")},close:function(e){console.log(e),console.log(this.files),console.log(this.files.length),this.files.splice(e.currentTarget.dataset.ind,1),this.imageBase64.splice(e.currentTarget.dataset.ind,1)},takeCamera:function(e){var a=this;wx.chooseImage({count:1,sizeType:["compressed"],sourceType:["camera"],success:function(e){var t=e.tempFilePaths[0];a.chageBase64(t),a.setData({files:a.files.concat(e.tempFilePaths)})},fail:function(e){s.globalData.ShowMsgUtil.showNoneToastByFail()}})},takePhoto:function(e){var a=this;wx.chooseImage({count:1,sizeType:["compressed"],sourceType:["album"],success:function(e){console.log(e);a.img;var t=e.tempFilePaths[0];console.log(e);var i=e.tempFiles[0].name.substring(e.tempFiles[0].name.lastIndexOf(".")+1);"jpg"==i||"png"==i?(a.chageBase64(t),a.setData({files:a.files.concat(e.tempFilePaths)})):s.globalData.ShowMsgUtil.showErrorModal("上传失败","上传图片只能是 jpg、png格式!")},fail:function(e){s.globalData.ShowMsgUtil.showNoneToastByFail()}})},previewImage:function(e){wx.previewImage({current:e.currentTarget.id,urls:this.files})},chageBase64:function(e){var a=this,t="",i=s.globalData.base64Util.pathToBase64;i(e).then((function(e){t=e;var i=new RegExp("data:image/png;base64,","g"),s=new RegExp("data:image/jpeg;base64,","g"),o=t.replace(i,""),c=o.replace(s,""),r=a.imageBase64.length;a.setData((0,n.default)({},"imageBase64["+r+"]",c))})).catch((function(e){console.error(e)}))},confirmApply:function(){var e=this;if(""!=e.inputText)if(e.stars<=0)s.globalData.ShowMsgUtil.showErrorModal("请求失败","至少要有一颗星");else{var a={};a.hidden=e.checkboxItems[0].checked?1:0,a.starsNumber=e.stars,e.setData({disabled:!0}),e.request(a)}else s.globalData.ShowMsgUtil.showErrorModal("请求失败","请填写评价描述")},request:function(e){s.globalData.ShowMsgUtil.netErrNotice();var a=this;s.globalData.ShowMsgUtil.showLoadToast("正在评价...");var t=s.globalData.StorageUtil.get("userInfoCach");wx.request({url:s.globalData.RequestUrl.repairRequestUrl.saveComments,data:{hidden:e.hidden,commentRanks:e.starsNumber,commentDesc:a.inputText,imglist:a.imageBase64,commentName:t.name,repairCode:a.repairCode},method:"POST",header:{token:t.token,"content-type":"application/json"},success:function(e){if(console.log("评论保存返回",e.data),!e.data||200!=e.data.code)return a.setData({disabled:!1}),void s.globalData.ShowMsgUtil.showErrorModal("请求失败",e.data.msg,e.data.code);s.globalData.ShowMsgUtil.showSuccessToast("评价成功",500),s.globalData.PublicUtil.navigateByUrl(s.globalData.PageUrl.repairPageUrl.successPageUrl,500)},fail:function(){a.setData({disabled:!1}),s.globalData.ShowMsgUtil.showNoneToastByFail()},complete:function(){wx.hideToast()}})}}});a.default=c},a18e:function(e,a,t){"use strict";var i=t("3126"),n=t.n(i);n.a},c2d6:function(e,a){var t="/static/pages/repairModule/resources/pic",i={image:t,repairApplyPic:"".concat(t,"/repair_apply.png"),myRepairPic:"".concat(t,"/repair_my.png"),starOn:"".concat(t,"/star_on.png"),starOff:"".concat(t,"/star_off.png"),icCall:"".concat(t,"/ic_call.png"),icProcessBlue:"".concat(t,"/ic_process_blue.png"),icProcessGray:"".concat(t,"/ic_process_gray.png"),navHomePage:"".concat(t,"/nav_home_page.png"),navHomePagePressed:"".concat(t,"/nav_home_page_pressed.png"),navMine:"".concat(t,"/nav_mine.png"),navMinePressed:"".concat(t,"/nav_mine_pressed.png"),navWorkerOrder:"".concat(t,"/nav_worker_order.png"),navWorkerOrderPressed:"".concat(t,"/nav_worker_order_pressed.png"),navNew:"".concat(t,"/nav_new.png"),navNewPressed:"".concat(t,"/nav_new_pressed.png"),bgRepairHeader:"".concat(t,"/bg_repair_header.png"),mineFunRecord:"".concat(t,"/mine_fun_record.png"),icStars:"".concat(t,"/ic_stars.png"),icTypeOther:"".concat(t,"/ic_type_other.png"),icRepairLock:"".concat(t,"/ic_repair_lock.png"),icRepairAmmeter:"".concat(t,"/ic_repair_ammeter.png"),icRepairWatermeter:"".concat(t,"/ic_repair_watermeter.png"),icRepairLamp:"".concat(t,"/ic_repair_lamp.png"),icClose:"".concat(t,"/close.png")};e.exports=i},c900:function(e,a,t){var i=t("24fb");a=i(!1),a.push([e.i,'.myui-page[data-v-65887242]{padding:%?20?% %?25?%}.myui-select[data-v-65887242]{position:relative;margin-top:.57647059em;line-height:1.41176471;font-size:17px}.myui-cells[data-v-65887242]{width:100%;height:%?500?%;background:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.myui-cell[data-v-65887242]{height:33%;width:90%}.myui-center[data-v-65887242]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.myui-cell__title[data-v-65887242]{font-size:17px;font-weight:700}.myui-cell__ft[data-v-65887242]{text-align:right;font-size:13px}.myui-cell__box[data-v-65887242]{border-radius:20%;background:#eee}\r\n/*打星  */uni-radio-group[data-v-65887242]{background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;padding:0 15px}uni-radio-group .iconfont[data-v-65887242]{font-size:28px;margin-right:%?30?%;color:orange}uni-radio-group .stars[data-v-65887242]{line-height:44px;margin-left:%?50?%}.star[data-v-65887242]{width:32px;height:32px}uni-textarea[data-v-65887242]{width:%?700?%;padding:%?25?% 0}.textarea-wrp[data-v-65887242]{padding:0 %?25?%;background-color:#fff}.box[data-v-65887242]{padding:%?10?% %?30?%}.myui-cell[data-v-65887242]{margin-top:%?15?%}.myui-text[data-v-65887242]{padding-top:%?20?%}.weui-uploader__files[data-v-65887242]{position:relative}.closes[data-v-65887242]{width:50px;height:50px;position:relative;top:17px;color:red;left:66px;height:20px;width:20px;z-index:99}.weui-uploader__bds[data-v-65887242]{margin-bottom:-4px;margin-right:-9px}.centerBackground[data-v-65887242]{border-top:#fff;background-color:#fff;margin-bottom:%?20?%;padding-bottom:%?20?%}uni-button[type="primary"][data-v-65887242]{background-color:#20a4f7}',""]),e.exports=a},e235:function(e,a,t){"use strict";var i;t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return s})),t.d(a,"a",(function(){return i}));var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",{staticClass:"page"},[t("v-uni-view",{staticClass:"page__bd myui-page"},[t("v-uni-view",{staticClass:"myui-cells"},[t("v-uni-view",{staticClass:"myui-cell myui-center"},[t("v-uni-text",{staticClass:"myui-cell__title"},[e._v("你对本次服务满意吗？")])],1),t("v-uni-view",{staticClass:"myui-cell"},[t("v-uni-view",{staticClass:"weui-cell myui-cell__box"},[t("v-uni-view",{staticClass:"weui-cell__hd",staticStyle:{position:"relative","margin-right":"10px"}},[t("v-uni-image",{staticStyle:{width:"50px",height:"50px",display:"block"},attrs:{src:"/static/images/mine/role_teacher.png"}})],1),t("v-uni-view",{staticClass:"weui-cell__bd"},[t("v-uni-view",[e._v(e._s(e.nameOfMaintainer)+"(维修工)")])],1),t("v-uni-view",{staticClass:"myui-select weui-cells_after-title"},[t("v-uni-checkbox-group",{on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.checkboxChange.apply(void 0,arguments)}}},e._l(e.checkboxItems,(function(e,a){return t("v-uni-label",{key:a,staticClass:"weui-cell weui-check__label"},[t("v-uni-checkbox",{staticClass:"weui-check",attrs:{value:e.value,checked:e.checked}}),t("v-uni-view",{staticClass:"weui-cell__hd weui-check__hd_in-checkbox"})],1)})),1)],1)],1)],1),t("v-uni-view",{staticClass:"myui-cell myui-center"},[t("v-uni-radio-group",{on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.radioChange.apply(void 0,arguments)}}},e._l(e.radioItems,(function(e,a){return t("v-uni-label",{key:a},[t("v-uni-radio",{staticClass:"weui-check",attrs:{type:"number",value:e.value,checked:e.checked}}),t("v-uni-view",{staticClass:"iconfont"},[t("v-uni-image",{staticClass:"star",attrs:{src:e.classname}})],1)],1)})),1)],1)],1),t("v-uni-view",{staticClass:"page-body myui-celll"},[t("v-uni-view",{staticClass:"page-section"},[t("v-uni-view",{staticClass:"textarea-wrp"},[t("v-uni-view",{staticClass:"myui-text"},[e._v("评价描述："),t("v-uni-text",{staticStyle:{color:"#aaa"}},[e._v("请输入本次服务评价描述")])],1),t("v-uni-textarea",{staticStyle:{width:"100%"},attrs:{"auto-height":!0},on:{input:function(a){arguments[0]=a=e.$handleEvent(a),e.bindTextAreaBlur.apply(void 0,arguments)}}})],1)],1)],1),t("v-uni-view",{staticClass:"weui-cell centerBackground myui-celll"},[t("v-uni-view",{staticClass:"weui-cell__bd"},[t("v-uni-view",{staticClass:"weui-uploader"},[t("v-uni-view",{staticClass:"weui-uploader__hd"},[t("v-uni-view",{staticClass:"weui-uploader__title"},[e._v("拍照上传（选填）")])],1),t("v-uni-view",{staticClass:"weui-uploader__bd "},[t("v-uni-view",{staticClass:"weui-uploader__files",attrs:{id:"uploaderFiles"}},[e._l(e.files,(function(a,i){return[t("v-uni-view",{key:i+"_0",staticClass:"weui-uploader__file",staticStyle:{width:"80px"},attrs:{id:a,"data-ind":i},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.previewImage.apply(void 0,arguments)}}},[t("v-uni-input",{staticStyle:{"margin-top":"-38px"},attrs:{type:"file",accept:"image/*",id:"uploadImage",capture:"camera",onchange:"selectFileImage(this);"}}),t("v-uni-view",{staticClass:"close",attrs:{"data-ind":i},on:{click:function(a){a.stopPropagation(),arguments[0]=a=e.$handleEvent(a),e.close.apply(void 0,arguments)}}},[t("v-uni-image",{staticClass:"closes",attrs:{src:e.img[i]}})],1),t("img",{staticClass:"weui-uploader__img",attrs:{alt:"preview",src:a,id:"index"}})],1)]}))],2),t("v-uni-view",{staticClass:"weui-uploader__input-box",staticStyle:{"margin-top":"12px"}},[t("v-uni-view",{staticClass:"weui-uploader__input",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.chooseImage.apply(void 0,arguments)}}})],1)],1)],1)],1)],1),t("v-uni-view",{staticClass:"page__bd page__bd_spacing myui__btn-top"},[t("v-uni-button",{staticClass:"weui-btn",attrs:{type:"primary",disabled:e.disabled,"form-type":"submit"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.confirmApply.apply(void 0,arguments)}}},[e._v("确认提交")])],1)],1)],1)},s=[]}}]);